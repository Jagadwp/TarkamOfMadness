(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{135:function(e,t,s){"use strict";s.r(t);var n,i,a,c=s(0),r=s(1),o=s.n(r),l=s(73),h=s.n(l),u=(s(82),s(83),s(21)),j=s.n(u),d=s(28),p=s(3),m=s(23),b=s(4),x=s(136),O=s(6),f=s.n(O),v=s(139),g=s(24),y=s(22),w=function(e){return Object(c.jsx)("div",{children:Object(c.jsx)("span",{className:"ErrorMsg",children:Object(c.jsx)("b",{children:e.msg})})})},k=(s(41),function(){var e=Object(r.useContext)(Z),t=(e.userData,e.setUserData),s=Object(r.useState)({name:"",password:"",passwordAgain:""}),n=Object(p.a)(s,2),i=n[0],a=n[1],o=Object(r.useState)(),l=Object(p.a)(o,2),h=l[0],u=l[1],m=function(){var e=Object(d.a)(j.a.mark((function e(s){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),e.prev=1,n={name:i.name,password:i.password},i.password===i.passwordAgain){e.next=8;break}return u("Enter the same password twice!"),e.abrupt("return");case 8:console.log(n);case 9:return e.next=11,f.a.post("/api/users/register",n);case 11:return e.next=13,f.a.post("/api/users/login",n);case 13:c=e.sent,t({token:c.data.token,user:c.data.user}),localStorage.setItem("auth-token",c.data.token),a({name:"",password:"",passwordAgain:""}),window.location="/",e.next=23;break;case 20:e.prev=20,e.t0=e.catch(1),e.t0.response.data.msg?u(e.t0.response.data.msg):u("We have some error!");case 23:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,s=t.name,n=t.value;a((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},s,n))}))};return Object(c.jsxs)("div",{className:"RegisterComponent",children:[Object(c.jsxs)("form",{className:"RegisterForm",onSubmit:m,children:[Object(c.jsx)("label",{children:"Username:\xa0 "}),Object(c.jsx)("input",{type:"text",name:"name",value:i.name,required:!0,onChange:b}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Password:\xa0 "}),Object(c.jsx)("input",{type:"password",name:"password",value:i.password,onChange:b}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Password Again:\xa0 "}),Object(c.jsx)("input",{type:"password",name:"passwordAgain",value:i.passwordAgain,onChange:b}),Object(c.jsx)("br",{}),Object(c.jsx)(v.a,{className:"RegisterBtn",variant:"success",type:"submit",children:"Reg!"})]}),h&&Object(c.jsx)(w,{msg:h})]})}),S=function(){var e=Object(r.useContext)(Z),t=(e.userData,e.setUserData),s=Object(r.useState)({name:"",password:""}),n=Object(p.a)(s,2),i=n[0],a=n[1],o=Object(r.useState)(),l=Object(p.a)(o,2),h=l[0],u=l[1],m=function(){var e=Object(d.a)(j.a.mark((function e(s){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.prev=1,n={name:i.name,password:i.password},e.next=5,f.a.post("/api/users/login",n);case 5:c=e.sent,t({token:c.data.token,user:c.data.user}),localStorage.setItem("auth-token",c.data.token),a({name:"",password:""}),window.location="/",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response.data.msg?u(e.t0.response.data.msg):u("We have an error!");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.target,s=t.name,n=t.value;a((function(e){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},s,n))}))};return Object(c.jsxs)("div",{className:"LoginComponent",children:[Object(c.jsxs)("form",{className:"LoginForm",onSubmit:m,children:[Object(c.jsx)("label",{children:"Username:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"text",name:"name",value:i.name,required:!0,onChange:b}),Object(c.jsx)("br",{}),Object(c.jsx)("label",{children:"Password:"}),Object(c.jsx)("br",{}),Object(c.jsx)("input",{type:"password",name:"password",value:i.password,onChange:b}),Object(c.jsx)("br",{}),Object(c.jsx)(v.a,{className:"LoginBtn",variant:"success",type:"submit",children:"Log In"})]}),h&&Object(c.jsx)(w,{msg:h})]})},T=function(){var e=Object(r.useState)(!0),t=Object(p.a)(e,2),s=t[0],n=t[1];return Object(c.jsx)("div",{className:"AuthBox",children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(v.a,{className:"LoginLink",onClick:function(){return n(!0)},children:"Login"}),Object(c.jsx)(v.a,{className:"RegisterLink",onClick:function(){return n(!1)},children:"Register"}),s?Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"LoginMsg",children:[Object(c.jsxs)("p",{children:[Object(c.jsx)("b",{children:"WELCOME BACK"})," if you have been here before!"]}),Object(c.jsxs)("p",{children:["If not, then quickly\xa0",Object(c.jsx)("span",{className:"RegSpan",onClick:function(){return n(!1)},children:"\xa0Register\xa0"}),"\xa0please!"]})]}),Object(c.jsx)(S,{})]}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"RegisterMsg",children:[Object(c.jsx)("p",{children:"Hi, just make up any nickname"}),Object(c.jsxs)("p",{children:["you'd like to play under, ",Object(c.jsx)("b",{children:"that's all"})]})]}),Object(c.jsx)(k,{})]})]})})},C=s(137),N=s(138),A=s(74),D=s.n(A)()(),P=(s(37),s(76)),I=function(){var e=Object(r.useContext)(Z),t=e.userData,s=(e.setUserData,Object(r.useState)([])),n=Object(p.a)(s,2),i=n[0],a=n[1],o=Object(r.useState)({name:t.user.name,msg:""}),l=Object(p.a)(o,2),h=l[0],u=l[1];return D.on("newChatMessage",(function(e){a([].concat(Object(P.a)(i),[{name:e.name,msg:e.msg}]))})),Object(c.jsxs)("div",{className:"ChatComponent",children:[Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault();var s={name:h.name,msg:h.msg};D.emit("newChatMessage",s),u({name:t.user.name,msg:""})},children:[Object(c.jsx)("input",{type:"text",name:"msg",value:h.msg,placeholder:"Type Your Message...",onChange:function(e){u(Object(y.a)(Object(y.a)({},h),{},Object(g.a)({},e.target.name,e.target.value)))},required:!0,style:{width:"80%"}}),Object(c.jsx)("input",{type:"submit",value:"Message!",style:{width:"20%"}})]}),Object(c.jsxs)("div",{className:"ChatMessages",children:[Object(c.jsx)("center",{children:Object(c.jsx)("p",{children:"...."})}),Object(c.jsx)("ul",{style:{listStyle:"none"},children:i.map((function(e,t){return Object(c.jsxs)("li",{children:[Object(c.jsxs)("b",{children:[e.name,": "]}),Object(c.jsx)("i",{children:e.msg})]},t)}))})]})]})},M=function(e){var t=Object(b.e)();return D.on("gameRequested",(function(e){D.emit("socketOnRequest",e),t.push("/gamesetup")})),Object(c.jsx)("div",{children:e.name!==e.ownName&&Object(c.jsxs)("div",{className:0===e.room?"PoolElem":"Disabled",children:[Object(c.jsxs)("div",{className:"PoolElemInfo",children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("b",{children:e.name})," (",e.room,")"]}),0===e.room?Object(c.jsx)("div",{children:"Ready To Play!"}):Object(c.jsx)("div",{children:"(Currently playing...)"})]}),Object(c.jsx)("div",{className:"PoolElemButton",children:0===e.room?Object(c.jsx)(v.a,{onClick:function(){D.emit("gameRequest",{p1name:e.ownName,p2name:e.name}),t.push("/gamesetup")},children:"PLAY!"}):Object(c.jsx)(v.a,{disabled:!0,children:"xxxxx"})})]})})},L=function(){var e=Object(r.useContext)(Z),t=e.userData,s=(e.setUserData,Object(r.useState)({})),n=Object(p.a)(s,2),i=n[0],a=n[1],o=Object(r.useState)(""),l=Object(p.a)(o,2),h=l[0],u=l[1];return Object(r.useEffect)((function(){D.emit("setPlayerName",t.user.name)}),[]),D.on("userList",(function(e){a(e)})),Object(c.jsxs)("div",{className:"PoolComponent",children:[Object(c.jsxs)("center",{children:["There are now ",Object.keys(i).length-1," other players here"]}),Object(c.jsx)("input",{type:"text",placeholder:"Search Bar...",className:"SearchBar",onChange:function(e){u(e.target.value)}}),Object(c.jsx)("br",{}),Object(c.jsx)("div",{className:"UserListWrapper",children:Object.keys(i).filter((function(e){if(e.toLowerCase().includes(h.toLowerCase()))return e})).map((function(e){return Object(c.jsx)(M,{name:e,room:i[e],ownName:t.user.name},e)}))})]})},F=function(){return Object(c.jsx)("div",{className:"Footer",children:Object(c.jsx)("h6",{children:"FP Progjar \xa0\xa0\xa0\xa0"})})},R=function(){var e=Object(r.useContext)(Z),t=e.userData,s=e.setUserData,n=Object(b.e)();return Object(c.jsxs)(x.a,{className:"MainScreen",children:[Object(c.jsx)(C.a,{children:Object(c.jsx)(N.a,{children:Object(c.jsxs)("div",{className:"Header",children:[Object(c.jsx)("div",{className:"BigRedBall"}),Object(c.jsxs)("div",{className:"HeaderCenter",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"Tarkam of Madness"})}),Object(c.jsx)("p",{children:Object(c.jsx)("i",{children:"Get 3 points to win!"})}),Object(c.jsxs)("p",{children:["Ready For The Next Game, ",Object(c.jsx)("b",{children:t.user.name}),"?"]}),Object(c.jsxs)("div",{className:"HeaderLinks",children:[Object(c.jsxs)("div",{className:"StatLinkDiv",children:[Object(c.jsx)("p",{children:"Check Your Stats Here"}),Object(c.jsx)(v.a,{className:"StatButton",onClick:function(){n.push("/stats")},children:"Your Stats"})]}),Object(c.jsxs)("div",{className:"LogOutDiv",children:[Object(c.jsx)("p",{children:"Log Out If You Want"}),Object(c.jsx)(v.a,{className:"LogOutButton",onClick:function(){s({token:void 0,user:void 0}),D.emit("logoutUser",t.user.name),localStorage.setItem("auth-token","")},children:"Log Out"})]})]})]}),Object(c.jsx)("div",{className:"BigRedBall"})]})})}),Object(c.jsxs)(C.a,{style:{height:"70%"},children:[Object(c.jsxs)(N.a,{className:"ChatBlock",children:[Object(c.jsxs)("div",{className:"ChatHeader",children:[Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"Let's Chat Here"})}),Object(c.jsxs)("p",{children:["Say Hello! Don't be shy, ",Object(c.jsxs)("b",{children:[t.user.name,"!"]})]})]}),Object(c.jsx)(I,{})]}),Object(c.jsxs)(N.a,{className:"PoolBlock",children:[Object(c.jsx)("div",{className:"PoolHeader",children:Object(c.jsx)("p",{children:Object(c.jsx)("b",{children:"Currently Connected Users"})})}),Object(c.jsx)(L,{})]})]}),Object(c.jsx)(C.a,{children:Object(c.jsx)(N.a,{children:Object(c.jsx)(F,{})})})]})},B=function(){var e=Object(r.useContext)(Z),t=e.userData;e.setUserData;return Object(c.jsx)("div",{children:t.user?Object(c.jsx)(R,{}):Object(c.jsx)(T,{})})},E=s(34),U=s(14),G=s(30),Y=s(29),V=s(7),W=s(11),q=(s(45),{}),_=D.id,H=0,X=!1,K=function(){var e=Object(b.e)(),t=o.a.useRef(null),s=Object(r.useState)(""),l=Object(p.a)(s,2),h=l[0],u=l[1],j=o.a.useState(null),d=Object(p.a)(j,2),m=d[0],x=d[1];o.a.useEffect((function(){if(t.current){var s=t.current.getContext("2d");s&&x(s)}if(m){var c=function(){m.clearRect(0,0,640,480),l.forEach((function(e){e.render()})),o()},r=function(e){if(H<=0){var t={left:e.left,up:e.up,right:e.right,down:e.down,action:e.action};D.emit("userCommands",t)}},o=function(){if(q[i]){switch(m.font="60px Arial",m.fillStyle="blue",m.textAlign="center",q[i].point){case 0:m.fillStyle="silver",m.fillText("*",30,100),m.fillText("*",30,75),m.fillText("*",30,50);break;case 1:m.fillText("*",30,100),m.fillStyle="silver",m.fillText("*",30,75),m.fillText("*",30,50);break;case 2:m.fillText("*",30,100),m.fillText("*",30,75),m.fillStyle="silver",m.fillText("*",30,50)}m.font="30px Arial",m.fillStyle="blue",m.textAlign="right",m.fillText("".concat(q[i].name),270,30),m.font="bold 45px Arial",m.fillStyle="blue",m.textAlign="center",m.fillText("".concat(q[i].point),300,35),m.font="italic 20px Trebuchet MS",m.fillStyle="blue",m.textAlign="right",m.fillText("".concat(q[i].msg),310,70)}if(q[a]){switch(m.font="60px Arial",m.fillStyle="green",m.textAlign="center",q[a].point){case 0:m.fillStyle="silver",m.fillText("*",610,100),m.fillText("*",610,75),m.fillText("*",610,50);break;case 1:m.fillText("*",610,100),m.fillStyle="silver",m.fillText("*",610,75),m.fillText("*",610,50);break;case 2:m.fillText("*",610,100),m.fillText("*",610,75),m.fillStyle="silver",m.fillText("*",610,50)}m.font="bold 45px Arial",m.fillStyle="green",m.textAlign="center",m.fillText("".concat(q[a].point),340,35),m.font="30px Arial",m.fillStyle="green",m.textAlign="left",m.fillText("".concat(q[a].name),370,30),m.font="italic 20px Trebuchet MS",m.fillStyle="green",m.textAlign="left",m.fillText("".concat(q[a].msg),330,70)}m.font="30px Arial",H>0&&(m.font="30px Arial",m.fillStyle="red",m.textAlign="center",m.fillText("START IN ".concat(H,"..."),320,200)),!1===X&&(m.font="20px Arial",m.fillStyle="black",m.textAlign="center",m.fillText("waiting to start....",320,30))},l=[],h=function(){function e(t,s){Object(V.a)(this,e),this.x=t,this.y=s}return Object(W.a)(e,[{key:"set",value:function(e,t){this.x=e,this.y=t}},{key:"add",value:function(t){return new e(this.x+t.x,this.y+t.y)}},{key:"subtr",value:function(t){return new e(this.x-t.x,this.y-t.y)}},{key:"mag",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"mult",value:function(t){return new e(this.x*t,this.y*t)}},{key:"normal",value:function(){return new e(-this.y,this.x).unit()}},{key:"unit",value:function(){return 0===this.mag()?new e(0,0):new e(this.x/this.mag(),this.y/this.mag())}},{key:"drawVec",value:function(e,t,s,n){m.beginPath(),m.moveTo(e,t),m.lineTo(e+this.x*s,t+this.y*s),m.strokeStyle=n,m.stroke(),m.closePath()}}],[{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"cross",value:function(e,t){return e.x*t.y-e.y*t.x}}]),e}(),u=function(){function e(t,s){Object(V.a)(this,e),this.rows=t,this.cols=s,this.data=[];for(var n=0;n<this.rows;n++){this.data[n]=[];for(var i=0;i<this.cols;i++)this.data[n][i]=0}}return Object(W.a)(e,[{key:"multiplyVec",value:function(e){var t=new h(0,0);return t.x=this.data[0][0]*e.x+this.data[0][1]*e.y,t.y=this.data[1][0]*e.x+this.data[1][1]*e.y,t}},{key:"rotMx22",value:function(e){this.data[0][0]=Math.cos(e),this.data[0][1]=-Math.sin(e),this.data[1][0]=Math.sin(e),this.data[1][1]=Math.cos(e)}}]),e}(),j=function(){function e(t,s,n,i){Object(V.a)(this,e),this.vertex=[],this.vertex[0]=new h(t,s),this.vertex[1]=new h(n,i),this.dir=this.vertex[1].subtr(this.vertex[0]).unit(),this.mag=this.vertex[1].subtr(this.vertex[0]).mag(),this.pos=new h((this.vertex[0].x+this.vertex[1].x)/2,(this.vertex[0].y+this.vertex[1].y)/2)}return Object(W.a)(e,[{key:"draw",value:function(e){m.beginPath(),m.moveTo(this.vertex[0].x,this.vertex[0].y),m.lineTo(this.vertex[1].x,this.vertex[1].y),""===e?(m.strokeStyle="black",m.stroke()):(m.strokeStyle=e,m.stroke()),m.strokeStyle="",m.closePath()}}]),e}(),d=function(){function e(t,s,n){Object(V.a)(this,e),this.vertex=[],this.pos=new h(t,s),this.r=n}return Object(W.a)(e,[{key:"draw",value:function(e){m.beginPath(),m.arc(this.pos.x,this.pos.y,this.r,0,2*Math.PI),""===e?(m.strokeStyle="black",m.stroke()):(m.fillStyle=e,m.fill()),m.fillStyle="",m.closePath()}}]),e}(),p=function(){function e(t,s,n,i,a){Object(V.a)(this,e),this.vertex=[],this.vertex[0]=new h(t,s),this.vertex[1]=new h(n,i),this.dir=this.vertex[1].subtr(this.vertex[0]).unit(),this.refDir=this.vertex[1].subtr(this.vertex[0]).unit(),this.length=this.vertex[1].subtr(this.vertex[0]).mag(),this.width=a,this.vertex[2]=this.vertex[1].add(this.dir.normal().mult(this.width)),this.vertex[3]=this.vertex[2].add(this.dir.mult(-this.length)),this.pos=this.vertex[0].add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(this.width/2)),this.angle=0,this.rotMat=new u(2,2)}return Object(W.a)(e,[{key:"draw",value:function(e){m.beginPath(),m.moveTo(this.vertex[0].x,this.vertex[0].y),m.lineTo(this.vertex[1].x,this.vertex[1].y),m.lineTo(this.vertex[2].x,this.vertex[2].y),m.lineTo(this.vertex[3].x,this.vertex[3].y),m.lineTo(this.vertex[0].x,this.vertex[0].y),""===e?(m.strokeStyle="black",m.stroke()):(m.fillStyle=e,m.fill()),m.fillStyle="",m.closePath()}},{key:"getVertices",value:function(e){this.rotMat.rotMx22(e),this.dir=this.rotMat.multiplyVec(this.refDir),this.vertex[0]=this.pos.add(this.dir.mult(-this.length/2)).add(this.dir.normal().mult(this.width/2)),this.vertex[1]=this.pos.add(this.dir.mult(-this.length/2)).add(this.dir.normal().mult(-this.width/2)),this.vertex[2]=this.pos.add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(-this.width/2)),this.vertex[3]=this.pos.add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(this.width/2))}}]),e}(),b=function(){function e(t,s){Object(V.a)(this,e),this.comp=[],this.pos=new h(t,s),this.m=0,this.inv_m=0,this.inertia=0,this.inv_inertia=0,this.elasticity=1,this.friction=0,this.angFriction=0,this.maxSpeed=0,this.color="",this.layer=0,this.up=!1,this.down=!1,this.left=!1,this.right=!1,this.action=!1,this.vel=new h(0,0),this.acc=new h(0,0),this.keyForce=1,this.angKeyForce=.1,this.angle=0,this.angVel=0,this.player=!1,l.push(this)}return Object(W.a)(e,[{key:"render",value:function(){for(var e in this.comp)this.comp[e].draw(this.color)}},{key:"reposition",value:function(){this.acc=this.acc.unit().mult(this.keyForce),this.vel=this.vel.add(this.acc),this.vel=this.vel.mult(1-this.friction),this.vel.mag()>this.maxSpeed&&0!==this.maxSpeed&&(this.vel=this.vel.unit().mult(this.maxSpeed)),this.angVel*=1-this.angFriction}},{key:"keyControl",value:function(){}},{key:"remove",value:function(){-1!==l.indexOf(this)&&l.splice(l.indexOf(this),1)}}]),e}(),O=function(e){Object(G.a)(s,e);var t=Object(Y.a)(s);function s(e,n,i,a){var c;return Object(V.a)(this,s),(c=t.call(this)).pos=new h(e,n),c.comp=[new d(e,n,i)],c.m=a,0===c.m?c.inv_m=0:c.inv_m=1/c.m,c}return Object(W.a)(s,[{key:"setPosition",value:function(e,t){arguments.length>2&&void 0!==arguments[2]||this.angle;this.pos.set(e,t),this.comp[0].pos=this.pos}},{key:"reposition",value:function(){Object(E.a)(Object(U.a)(s.prototype),"reposition",this).call(this),this.setPosition(this.pos.add(this.vel).x,this.pos.add(this.vel).y)}},{key:"keyControl",value:function(){this.left&&(this.acc.x=-this.keyForce),this.up&&(this.acc.y=-this.keyForce),this.right&&(this.acc.x=this.keyForce),this.down&&(this.acc.y=this.keyForce),this.left||this.right||(this.acc.x=0),this.up||this.down||(this.acc.y=0)}}]),s}(b),f=function(e){Object(G.a)(s,e);var t=Object(Y.a)(s);function s(e,n,i,a,c,r){var o;Object(V.a)(this,s),(o=t.call(this)).comp=[new d(e,n,c),new d(i,a,c)];var l=o.comp[1].pos.add(o.comp[1].pos.subtr(o.comp[0].pos).unit().normal().mult(c)),h=o.comp[0].pos.add(o.comp[1].pos.subtr(o.comp[0].pos).unit().normal().mult(c));return o.comp.unshift(new p(l.x,l.y,h.x,h.y,2*c)),o.pos=o.comp[0].pos,o.m=r,0===o.m?o.inv_m=0:o.inv_m=1/o.m,o.inertia=o.m*(Math.pow(2*o.comp[0].width,2)+Math.pow(o.comp[0].length+2*o.comp[0].width,2))/12,0===o.m?o.inv_inertia=0:o.inv_inertia=1/o.inertia,o}return Object(W.a)(s,[{key:"keyControl",value:function(){this.up&&(this.acc=this.comp[0].dir.mult(-this.keyForce)),this.down&&(this.acc=this.comp[0].dir.mult(this.keyForce)),this.left&&(this.angVel=-this.angKeyForce),this.right&&(this.angVel=this.angKeyForce),this.up||this.down||this.acc.set(0,0)}},{key:"setPosition",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.angle;this.pos.set(e,t),this.angle=s,this.comp[0].pos=this.pos,this.comp[0].getVertices(this.angle+this.angVel),this.comp[1].pos=this.comp[0].pos.add(this.comp[0].dir.mult(-this.comp[0].length/2)),this.comp[2].pos=this.comp[0].pos.add(this.comp[0].dir.mult(this.comp[0].length/2)),this.angle+=this.angVel}},{key:"reposition",value:function(){Object(E.a)(Object(U.a)(s.prototype),"reposition",this).call(this),this.setPosition(this.pos.add(this.vel).x,this.pos.add(this.vel).y)}}]),s}(b),v=function(e){Object(G.a)(s,e);var t=Object(Y.a)(s);function s(e,n,i,a,c,r){var o;return Object(V.a)(this,s),(o=t.call(this)).comp=[new p(e,n,i,a,c)],o.pos=o.comp[0].pos,o.m=r,0===o.m?o.inv_m=0:o.inv_m=1/o.m,o.inertia=o.m*(Math.pow(o.comp[0].width,2)+Math.pow(o.comp[0].length,2))/12,0===o.m?o.inv_inertia=0:o.inv_inertia=1/o.inertia,o}return Object(W.a)(s,[{key:"keyControl",value:function(){this.up&&(this.acc=this.comp[0].dir.mult(-this.keyForce)),this.down&&(this.acc=this.comp[0].dir.mult(this.keyForce)),this.left&&(this.angVel=-this.angKeyForce),this.right&&(this.angVel=this.angKeyForce),this.up||this.down||this.acc.set(0,0)}},{key:"setPosition",value:function(e,t){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.angle;this.pos.set(e,t),this.angle=s,this.comp[0].pos=this.pos,this.comp[0].getVertices(this.angle+this.angVel),this.angle+=this.angVel}},{key:"reposition",value:function(){Object(E.a)(Object(U.a)(s.prototype),"reposition",this).call(this),this.setPosition(this.pos.add(this.vel).x,this.pos.add(this.vel).y)}}]),s}(b),g=function(e){Object(G.a)(s,e);var t=Object(Y.a)(s);function s(e,n,i,a){var c;return Object(V.a)(this,s),(c=t.call(this)).comp=[new j(e,n,i,a)],c.pos=new h((e+i)/2,(n+a)/2),c}return s}(b),y=!1;new g(60,80,580,80),new g(60,480,580,480),new g(0,370,0,190),new g(640,370,640,190),new v(0,80,60,80,110,0),new v(580,80,640,80,110,0),new v(0,370,60,370,110,0),new v(580,370,640,370,110,0),q[i]&&(q[i].remove(),delete q[i]),q[a]&&(q[a].remove(),delete q[a]),n&&n.remove(),D.emit("componentReady"),D.on("gameSetup",(function(e){var t;console.log("Gamesetup happens NOW"),_=D.id,i=e.p1ID,a=e.p2ID,q[e.p1ID]=new f(e.p1X+35,e.p1Y,e.p1X-35,e.p1Y,25,10),q[e.p1ID].no=1,q[e.p1ID].name=e.p1name,q[e.p1ID].color="lightblue",q[e.p1ID].score=e.p1score,q[e.p1ID].point=e.p1point,q[e.p1ID].msg="",q[e.p2ID]=new f(e.p2X+35,e.p2Y,e.p2X-35,e.p2Y,25,10),q[e.p2ID].no=2,q[e.p2ID].name=e.p2name,q[e.p2ID].color="lightgreen",q[e.p2ID].score=e.p2score,q[e.p2ID].point=e.p2point,q[e.p2ID].msg="",(n=new O(e.ballX,e.ballY,20,10)).color="red",!1===X&&(X=!0,w()),t=q[_],window.addEventListener("keydown",(function(e){X&&("ArrowLeft"===e.code&&(!1===t.left&&(y=!0),t.left=!0),"ArrowUp"===e.code&&(!1===t.up&&(y=!0),t.up=!0),"ArrowRight"===e.code&&(!1===t.right&&(y=!0),t.right=!0),"ArrowDown"===e.code&&(!1===t.down&&(y=!0),t.down=!0),"Space"===e.code&&(!1===t.action&&(y=!0),t.action=!0),!0===y&&(r(t),y=!1))})),window.addEventListener("keyup",(function(e){X&&("ArrowLeft"===e.code&&(t.left=!1),"ArrowUp"===e.code&&(t.up=!1),"ArrowRight"===e.code&&(t.right=!1),"ArrowDown"===e.code&&(t.down=!1),"Space"===e.code&&(t.action=!1),r(t))}))})),D.on("positionUpdate",(function(e){q[i].setPosition(e.p1X,e.p1Y,e.p1A),q[a].setPosition(e.p2X,e.p2Y,e.p2A),n.setPosition(e.ballX,e.ballY)})),D.on("updateScore",(function(t){1===t.roundWin&&(document.body.style.backgroundColor="lightskyblue"),2===t.roundWin&&(document.body.style.backgroundColor="limegreen"),0!==t.roundWin&&w(),0!==t.gameWin&&(document.body.style.backgroundColor="white",X=!1,e.push("/gameover")),q[i].score=t.p1score,q[i].point=t.p1point,q[a].score=t.p2score,q[a].point=t.p2point})),D.on("gameConfirm",(function(t){X=!1,console.log("CLEAN UP TIME! ",t),t||(D.emit("cleanUpRoom"),e.push("/"))})),D.on("redirectToLobby",(function(){e.push("/")})),D.on("deletePlayer",(function(t){q[t]&&(q[t].remove(),delete q[t],q[_].remove(),delete q[_],n.remove(),X=!1,D.emit("gameConfirm",!1),e.push("/"))})),D.on("inGameMsg",(function(e){1===e.playerno&&(q[i].msg=e.msg),2===e.playerno&&(q[a].msg=e.msg)})),requestAnimationFrame((function e(){c(),requestAnimationFrame(e)}));var w=function(){H=3;var e=setInterval((function(){H--}),1e3);setTimeout((function(){clearInterval(e)}),3e3)}}}),[m]);return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"InGameDiv",children:[Object(c.jsx)("canvas",{id:"canvas",ref:t,tabindex:"0",width:640,height:480}),Object(c.jsxs)("div",{className:"GameFooter",children:[Object(c.jsxs)("form",{id:"gamemsg",onSubmit:function(e){e.preventDefault(),q[_]&&(D.emit("inGameMsg",{msg:h,playerno:q[_].no}),u("")),t.current.focus()},children:[Object(c.jsx)("input",{type:"text",name:"msg",value:h,placeholder:"Send a Message!",onChange:function(e){e.target.value.length<26&&u(e.target.value)},required:!0,style:{width:"80%"}}),Object(c.jsx)("input",{type:"submit",value:"Message!",style:{width:"20%"}})]}),Object(c.jsx)(v.a,{className:"QuitButton",onClick:function(){q[i]&&q[a]&&(q[i].point>1||q[a].point>1)?D.emit("inGameMsg",{msg:"IT'S NOT THE TIME TO QUIT!!",playerno:q[_].no}):(X=!1,D.emit("gameConfirm",!1),e.push("/"))},children:"QUIT GAME"})]})]})})},Q=function(){var e=Object(r.useState)({p1name:"",p2name:"",room:0}),t=Object(p.a)(e,2),s=t[0],n=t[1],i=Object(b.e)();Object(r.useEffect)((function(){console.log("GAMESETTING EMIT: ",D.id),D.emit("RequestGameInfo")}),[]),D.on("ProvideGameInfo",(function(e){n({p1name:e.p1name,p2name:e.p2name,room:e.room})})),D.on("gameConfirm",(function(e){e||(console.log("delete room"),D.emit("cleanUpRoom"),i.push("/"))})),D.on("redirectToLobby",(function(){i.push("/")}));return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"GameSetupContent",children:[Object(c.jsx)("span",{style:{fontSize:"10px"},children:s.room}),Object(c.jsx)("h1",{children:"IT'S A MATCH!"}),Object(c.jsx)("br",{}),s.p1name?Object(c.jsx)("h2",{children:s.p1name}):Object(c.jsx)("h2",{children:". . ."}),Object(c.jsx)("h3",{children:"vs."}),s.p2name?Object(c.jsx)("h2",{children:s.p2name}):Object(c.jsx)("h2",{children:". . ."}),Object(c.jsx)("br",{}),Object(c.jsx)("h1",{children:"Both of you want to play?"}),Object(c.jsxs)("div",{className:"ButtonSection",children:[Object(c.jsx)(v.a,{className:"LobbyButton",onClick:function(){D.emit("gameConfirm",!1),i.push("/")},children:"No Sorry..."}),Object(c.jsx)(v.a,{className:"PlayButton",onClick:function(){D.emit("gameConfirm",!0),console.log("play"),i.push("/game")},children:"LET'S PLAY!"})]})]})})},J=function(){var e=Object(r.useContext)(Z),t=e.userData,s=(e.setUserData,Object(b.e)()),n=Object(r.useState)(!1),i=Object(p.a)(n,2),a=i[0],o=i[1],l=Object(r.useState)({p1name:"",p2name:"",p1score:0,p2score:0}),h=Object(p.a)(l,2),u=h[0],j=h[1];Object(r.useEffect)((function(){D.emit("RequestFinalResult",D.id)}),[]),Object(r.useEffect)((function(){var e={};t.user.name===u.p1name&&(e={name:u.p1name,point:u.p1point,oppName:u.p2name,oppPoint:u.p2point},a||(o(!0),console.log("DB UPDATE FOR STATS: ",e),f.a.put("/api/users/profile",e,{headers:{"auth-token":t.token}}))),t.user.name===u.p2name&&(e={name:u.p2name,point:u.p2point,oppName:u.p1name,oppPoint:u.p1point},a||(o(!0),console.log("DB UPDATE FOR STATS: ",e),f.a.put("/api/users/profile",e,{headers:{"auth-token":t.token}})))}),[u]),D.on("ProvideFinalResult",(function(e){j({p1name:e.p1name,p2name:e.p2name,p1point:e.p1point,p2point:e.p2point})})),D.on("gameConfirm",(function(e){e||(D.emit("cleanUpRoom"),s.push("/"))})),D.on("redirectToLobby",(function(){s.push("/")}));return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"GameOverContent",children:[Object(c.jsx)("h1",{children:"WHAT A GAME!"}),Object(c.jsx)("br",{}),Object(c.jsxs)("h2",{children:[u.p1name,": ",u.p1point]}),Object(c.jsx)("h3",{children:"vs."}),Object(c.jsxs)("h2",{children:[u.p2name,": ",u.p2point]}),Object(c.jsx)("br",{}),Object(c.jsxs)("h1",{children:["CONGRATS TO\xa0\xa0",u.p1point>u.p2point?Object(c.jsx)("span",{className:"WinnerName",children:u.p1name}):Object(c.jsx)("span",{className:"WinnerName",children:u.p2name})," !!"]}),Object(c.jsxs)("div",{className:"ButtonSection",children:[Object(c.jsx)(v.a,{className:"PlayButton",onClick:function(){D.emit("gameConfirm",!0),s.push("/game")},children:"PLAY AGAIN!"}),Object(c.jsx)(v.a,{className:"LobbyButton",onClick:function(){D.emit("gameConfirm",!1),s.push("/")},children:"To The Lobby"})]})]})})},z=function(){var e=Object(b.e)(),t=Object(r.useState)({gamesPlayed:0,gamesWon:0,pointsFor:0,pointsAgainst:0,lastGame:!0,lastOpponent:""}),s=Object(p.a)(t,2),n=s[0],i=s[1],a=Object(r.useContext)(Z),o=a.userData;a.setUserData;Object(r.useEffect)((function(){f.a.get("/api/users/profile",{headers:{"auth-token":o.token}}).then((function(e){i(e.data.stats)}))}),[]);return Object(c.jsx)("div",{children:Object(c.jsxs)("div",{className:"StatContent",children:[Object(c.jsxs)("h1",{children:["STATS of ",o.user.name]}),n.gamesPlayed>0?Object(c.jsxs)("div",{className:"StatText",children:[Object(c.jsxs)("h4",{children:["You have finished ",Object(c.jsx)("span",{style:{color:"red"},children:n.gamesPlayed})," Games so far."]}),Object(c.jsxs)("h4",{children:["And won ",Object(c.jsx)("span",{style:{color:"red"},children:n.gamesWon})," of them."]}),Object(c.jsx)("h2",{children:"Nice."}),Object(c.jsxs)("h4",{children:["You've received ",Object(c.jsx)("span",{style:{color:"red"},children:n.pointsFor})," Points altogether."]}),Object(c.jsxs)("h4",{children:["Your opponents have received ",Object(c.jsx)("span",{style:{color:"red"},children:n.pointsAgainst}),"."]}),Object(c.jsxs)("h4",{children:["Last time you played with ",Object(c.jsx)("span",{style:{color:"red"},children:n.lastOpponent})]}),n.lastGame?Object(c.jsx)("h2",{children:Object(c.jsx)("span",{style:{color:"red"},children:"And You Won!"})}):Object(c.jsx)("h2",{children:Object(c.jsx)("span",{style:{color:"red"},children:"And You Lost :("})}),Object(c.jsx)("h4",{children:"Sooo it's probably time to try again!"})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"No Game, No Stats..."}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("h2",{children:"\xaf\\_(\u30c4)_/\xaf"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("h6",{children:"(it's either still loading your data or you've never ever played a game)"})]}),Object(c.jsx)("div",{className:"StatBackDiv",children:Object(c.jsx)(v.a,{className:"StatBackButton",onClick:function(){e.push("/")},children:"ok thanks that was quite interesting"})})]})})},Z=Object(r.createContext)();var $=function(){var e=Object(r.useState)({token:void 0,user:void 0}),t=Object(p.a)(e,2),s=t[0],n=t[1];return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(j.a.mark((function e(){var t,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==(t=localStorage.getItem("auth-token"))&&(localStorage.setItem("auth-token",""),t=""),e.next=4,f.a.post("/api/users/tokenIsValid",null,{headers:{"auth-token":t}});case 4:if(s=e.sent,console.log(s.data),!s.data){e.next=11;break}return e.next=9,f.a.get("/api/users/profile",{headers:{"auth-token":t}});case 9:i=e.sent,n({token:t,user:i.data});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(c.jsx)(Z.Provider,{value:{userData:s,setUserData:n},children:Object(c.jsx)(m.a,{children:Object(c.jsxs)(x.a,{children:[Object(c.jsx)(b.a,{path:"/",exact:!0,component:B}),Object(c.jsx)(b.a,{path:"/game",component:K}),Object(c.jsx)(b.a,{path:"/gamesetup",component:Q}),Object(c.jsx)(b.a,{path:"/gameover",component:J}),Object(c.jsx)(b.a,{path:"/stats",component:z})]})})})},ee=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,140)).then((function(t){var s=t.getCLS,n=t.getFID,i=t.getFCP,a=t.getLCP,c=t.getTTFB;s(e),n(e),i(e),a(e),c(e)}))};h.a.render(Object(c.jsx)(o.a.StrictMode,{children:Object(c.jsx)($,{})}),document.getElementById("root")),ee()},37:function(e,t,s){},41:function(e,t,s){},45:function(e,t,s){},82:function(e,t,s){},83:function(e,t,s){}},[[135,1,2]]]);
//# sourceMappingURL=main.21d31e90.chunk.js.map