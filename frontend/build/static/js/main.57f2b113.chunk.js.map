{"version":3,"sources":["components/game/Game.js","components/auth/ErrorMsg.js","components/auth/Register.js","components/auth/Login.js","components/auth/Auth.js","components/Socket.js","components/Chat.js","components/PoolElem.js","components/Pool.js","components/Footer.js","components/Lobby.js","components/Welcome.js","components/game/GameSetup.js","components/game/GameOver.js","components/Stats.js","App.js","reportWebVitals.js","index.js"],"names":["football","p1ID","p2ID","ErrorMsg","props","className","msg","Register","useContext","UserContext","setUserData","userData","useState","name","password","passwordAgain","user","setUser","errorMsg","setErrorMsg","handleSubmit","e","a","preventDefault","newUser","console","log","axios","post","loginResponse","token","data","localStorage","setItem","window","location","response","handleChange","target","value","oldUser","onSubmit","type","required","onChange","Button","variant","Login","Auth","login","setLogin","Container","onClick","socket","io","Chat","msgList","setMsgList","chatMessage","setChatMessage","on","newMessage","emit","placeholder","style","width","listStyle","map","index","PoolElem","history","useHistory","minRoom","push","ownName","room","p1name","p2name","disabled","Pool","userRooms","setUserRooms","userSearch","setUserSearch","useEffect","userList","Object","keys","length","filter","username","toLowerCase","includes","Footer","Lobby","Row","Col","undefined","height","Welcome","clientBalls","selfID","id","countDownSec","gameReady","Game","canvasRef","React","useRef","ctx","setCtx","current","renderCtx","getContext","renderLoop","clearRect","BODIES","forEach","b","render","userInterface","emitUserCommands","obj","userCommands","left","up","right","down","action","font","fillStyle","textAlign","point","fillText","Vector","x","y","this","v","Math","sqrt","n","unit","mag","start_x","start_y","color","beginPath","moveTo","lineTo","strokeStyle","stroke","closePath","v1","v2","Matrix","rows","cols","i","j","vec","result","angle","cos","sin","Line","x0","y0","x1","y1","vertex","dir","subtr","pos","Circle","r","arc","PI","fill","Rectangle","x2","y2","w","refDir","add","normal","mult","rotMat","rotMx22","multiplyVec","Body","comp","m","inv_m","inertia","inv_inertia","elasticity","friction","angFriction","maxSpeed","layer","vel","acc","keyForce","angKeyForce","angVel","player","draw","indexOf","splice","Ball","set","setPosition","Capsule","recV1","recV2","unshift","getVertices","Box","Wall","justPressed","remove","p1X","p1Y","no","score","p1score","p1point","p2X","p2Y","p2score","p2point","ballX","ballY","countDown","addEventListener","code","p1A","p2A","newScore","roundWin","document","body","backgroundColor","gameWin","confirmed","playerID","playerno","requestAnimationFrame","renderOnly","count","setInterval","setTimeout","clearInterval","ref","tabindex","focus","GameSetup","gameInfo","setGameInfo","fontSize","GameOver","resultSent","setResultSent","finalResult","setFinalResult","updateStat","oppName","oppPoint","put","headers","Stats","gamesPlayed","gamesWon","pointsFor","pointsAgainst","lastGame","lastOpponent","userStats","setUserStats","get","then","stats","createContext","App","getItem","tokenResponse","userResponse","isLoggedIn","Provider","path","exact","component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.57f2b113.chunk.js","sourcesContent":["import React, {useEffect, useState, useRef} from 'react'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { socket } from \"../Socket\";\r\nimport { Button } from \"react-bootstrap\"\r\n\r\nimport \"./GameStyle.css\"\r\n\r\nlet football;\r\nlet clientBalls = {};\r\nlet selfID = socket.id\r\nlet p1ID, p2ID\r\nlet countDownSec = 0\r\nlet gameReady = false\r\n\r\nconst Game = () => {\r\n    const history = useHistory()\r\n    const canvasRef = React.useRef(null);\r\n    const [chatMessage, setChatMessage] = useState(\"\")\r\n    const [ctx, setCtx] = React.useState(null);\r\n\r\n    React.useEffect(() => {\r\n        if (canvasRef.current) {\r\n            const renderCtx = canvasRef.current.getContext('2d');\r\n        \r\n            if (renderCtx) {\r\n                setCtx(renderCtx);\r\n            }\r\n        }\r\n        if (ctx){\r\n            const BODIES = [];\r\n            const COLLISIONS = [];\r\n\r\n            class Vector{\r\n                constructor(x, y){\r\n                    this.x = x;\r\n                    this.y = y;\r\n                }  \r\n            \r\n                set(x, y){\r\n                    this.x = x;\r\n                    this.y = y;\r\n                }\r\n\r\n                add(v){\r\n                    return new Vector(this.x+v.x, this.y+v.y);\r\n                }\r\n\r\n                subtr(v){\r\n                    return new Vector(this.x-v.x, this.y-v.y);\r\n                }\r\n\r\n                mag(){\r\n                    return Math.sqrt(this.x**2 + this.y**2);\r\n                }\r\n\r\n                mult(n){\r\n                    return new Vector(this.x*n, this.y*n);\r\n                }\r\n\r\n                normal(){\r\n                    return new Vector(-this.y, this.x).unit();\r\n                }\r\n\r\n                unit(){\r\n                    if(this.mag() === 0){\r\n                        return new Vector(0,0);\r\n                    } else {\r\n                        return new Vector(this.x/this.mag(), this.y/this.mag());\r\n                    }\r\n                }\r\n\r\n                drawVec(start_x, start_y, n, color){\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(start_x, start_y);\r\n                    ctx.lineTo(start_x + this.x * n, start_y + this.y * n);\r\n                    ctx.strokeStyle = color;\r\n                    ctx.stroke();\r\n                    ctx.closePath();\r\n                }\r\n                \r\n                static dot(v1, v2){\r\n                    return v1.x*v2.x + v1.y*v2.y;\r\n                }\r\n\r\n                static cross(v1, v2){\r\n                    return v1.x*v2.y - v1.y*v2.x;\r\n                }\r\n            }\r\n\r\n            class Matrix{\r\n                constructor(rows, cols){\r\n                    this.rows = rows;\r\n                    this.cols = cols;\r\n                    this.data = [];\r\n\r\n                    for (let i = 0; i<this.rows; i++){\r\n                        this.data[i] = [];\r\n                        for (let j=0; j<this.cols; j++){\r\n                            this.data[i][j] = 0;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                multiplyVec(vec){\r\n                    let result = new Vector(0,0);\r\n                    result.x = this.data[0][0]*vec.x + this.data[0][1]*vec.y;\r\n                    result.y = this.data[1][0]*vec.x + this.data[1][1]*vec.y;\r\n                    return result;\r\n                }\r\n\r\n                rotMx22(angle){\r\n                    this.data[0][0] = Math.cos(angle);\r\n                    this.data[0][1] = -Math.sin(angle);\r\n                    this.data[1][0] = Math.sin(angle);\r\n                    this.data[1][1] = Math.cos(angle);\r\n                }\r\n            }\r\n\r\n            //classes storing the primitive shapes: Line, Circle, Rectangle, Triangle\r\n            class Line{\r\n                constructor(x0, y0, x1, y1){\r\n                    this.vertex = [];\r\n                    this.vertex[0] = new Vector(x0, y0);\r\n                    this.vertex[1] = new Vector(x1, y1);\r\n                    this.dir = this.vertex[1].subtr(this.vertex[0]).unit();\r\n                    this.mag = this.vertex[1].subtr(this.vertex[0]).mag();\r\n                    this.pos = new Vector((this.vertex[0].x+this.vertex[1].x)/2, (this.vertex[0].y+this.vertex[1].y)/2);\r\n                }\r\n\r\n                draw(color){\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(this.vertex[0].x, this.vertex[0].y);\r\n                    ctx.lineTo(this.vertex[1].x, this.vertex[1].y);\r\n                    if (color === \"\"){\r\n                        ctx.strokeStyle = \"black\";\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.strokeStyle = color;\r\n                        ctx.stroke();\r\n                    }\r\n                    ctx.strokeStyle = \"\";\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n\r\n            class Circle{\r\n                constructor(x, y, r){\r\n                    this.vertex = [];\r\n                    this.pos = new Vector(x, y);\r\n                    this.r = r;\r\n                }\r\n\r\n                draw(color){\r\n                    ctx.beginPath();\r\n                    ctx.arc(this.pos.x, this.pos.y, this.r, 0, 2*Math.PI);\r\n                    if (color === \"\"){\r\n                        ctx.strokeStyle = \"black\";\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = color;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.fillStyle = \"\";\r\n                    ctx.closePath();\r\n                }\r\n            }\r\n\r\n            class Rectangle{\r\n                constructor(x1, y1, x2, y2, w){\r\n                    this.vertex = [];\r\n                    this.vertex[0] = new Vector(x1, y1);\r\n                    this.vertex[1] = new Vector(x2, y2);\r\n                    this.dir = this.vertex[1].subtr(this.vertex[0]).unit();\r\n                    this.refDir = this.vertex[1].subtr(this.vertex[0]).unit();\r\n                    this.length = this.vertex[1].subtr(this.vertex[0]).mag();\r\n                    this.width = w;\r\n                    this.vertex[2] = this.vertex[1].add(this.dir.normal().mult(this.width));\r\n                    this.vertex[3] = this.vertex[2].add(this.dir.mult(-this.length));\r\n                    this.pos = this.vertex[0].add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(this.width/2));\r\n                    this.angle = 0;\r\n                    this.rotMat = new Matrix(2,2);\r\n                }\r\n\r\n                draw(color){\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(this.vertex[0].x, this.vertex[0].y);\r\n                    ctx.lineTo(this.vertex[1].x, this.vertex[1].y);\r\n                    ctx.lineTo(this.vertex[2].x, this.vertex[2].y);\r\n                    ctx.lineTo(this.vertex[3].x, this.vertex[3].y);\r\n                    ctx.lineTo(this.vertex[0].x, this.vertex[0].y);\r\n                    if (color === \"\"){\r\n                        ctx.strokeStyle = \"black\";\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = color;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.fillStyle = \"\";\r\n                    ctx.closePath();\r\n                }\r\n\r\n                getVertices(angle){\r\n                    this.rotMat.rotMx22(angle);\r\n                    this.dir = this.rotMat.multiplyVec(this.refDir);\r\n                    this.vertex[0] = this.pos.add(this.dir.mult(-this.length/2)).add(this.dir.normal().mult(this.width/2));\r\n                    this.vertex[1] = this.pos.add(this.dir.mult(-this.length/2)).add(this.dir.normal().mult(-this.width/2));\r\n                    this.vertex[2] = this.pos.add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(-this.width/2));\r\n                    this.vertex[3] = this.pos.add(this.dir.mult(this.length/2)).add(this.dir.normal().mult(this.width/2));\r\n                }\r\n            }\r\n\r\n            class Triangle{\r\n                constructor(x1, y1, x2, y2, x3, y3){\r\n                    this.vertex = [];\r\n                    this.vertex[0] = new Vector(x1, y1);\r\n                    this.vertex[1] = new Vector(x2, y2);\r\n                    this.vertex[2] = new Vector(x3, y3);\r\n                    this.pos = new Vector((this.vertex[0].x+this.vertex[1].x+this.vertex[2].x)/3, (this.vertex[0].y+this.vertex[1].y+this.vertex[2].y)/3);\r\n                    this.dir = this.vertex[0].subtr(this.pos).unit();\r\n                    this.refDir = this.dir;\r\n                    this.refDiam = [];\r\n                    this.refDiam[0] = this.vertex[0].subtr(this.pos);\r\n                    this.refDiam[1] = this.vertex[1].subtr(this.pos);\r\n                    this.refDiam[2] = this.vertex[2].subtr(this.pos);\r\n                    this.angle = 0;\r\n                    this.rotMat = new Matrix(2,2);\r\n                }\r\n\r\n                draw(color){\r\n                    ctx.beginPath();\r\n                    ctx.moveTo(this.vertex[0].x, this.vertex[0].y);\r\n                    ctx.lineTo(this.vertex[1].x, this.vertex[1].y);\r\n                    ctx.lineTo(this.vertex[2].x, this.vertex[2].y);\r\n                    ctx.lineTo(this.vertex[0].x, this.vertex[0].y);\r\n                    if (color === \"\"){\r\n                        ctx.strokeStyle = \"black\";\r\n                        ctx.stroke();\r\n                    } else {\r\n                        ctx.fillStyle = color;\r\n                        ctx.fill();\r\n                    }\r\n                    ctx.fillStyle = \"\";\r\n                    ctx.closePath();\r\n                }\r\n\r\n                getVertices(angle){\r\n                    this.rotMat.rotMx22(angle);\r\n                    this.dir = this.rotMat.multiplyVec(this.refDir);\r\n                    this.vertex[0] = this.pos.add(this.rotMat.multiplyVec(this.refDiam[0]));\r\n                    this.vertex[1] = this.pos.add(this.rotMat.multiplyVec(this.refDiam[1]));\r\n                    this.vertex[2] = this.pos.add(this.rotMat.multiplyVec(this.refDiam[2]));\r\n                }\r\n            }\r\n\r\n            //Parent class of the bodies (Ball, Capsule, Box, Star, Wall)\r\n            class Body{\r\n                constructor(x, y){\r\n                    this.comp = [];\r\n                    this.pos = new Vector(x, y);\r\n                    this.m = 0;\r\n                    this.inv_m = 0;\r\n                    this.inertia = 0;\r\n                    this.inv_inertia = 0;\r\n                    this.elasticity = 1;\r\n\r\n                    this.friction = 0;\r\n                    this.angFriction = 0;\r\n                    this.maxSpeed = 0;\r\n                    this.color = \"\";\r\n                    this.layer = 0;\r\n\r\n                    this.up = false;\r\n                    this.down = false;\r\n                    this.left = false;\r\n                    this.right = false;\r\n                    this.action = false;\r\n\r\n                    this.vel = new Vector(0, 0);\r\n                    this.acc = new Vector(0, 0);\r\n                    this.keyForce = 1;\r\n                    this.angKeyForce = 0.1;\r\n                    this.angle = 0;\r\n                    this.angVel = 0;\r\n                    this.player = false;\r\n                    BODIES.push(this);\r\n                }\r\n\r\n                render(){\r\n                    for (let i in this.comp){\r\n                        this.comp[i].draw(this.color);\r\n                    }\r\n                }\r\n                reposition(){\r\n                    this.acc = this.acc.unit().mult(this.keyForce);\r\n                    this.vel = this.vel.add(this.acc);\r\n                    this.vel = this.vel.mult(1-this.friction);\r\n                    if (this.vel.mag() > this.maxSpeed && this.maxSpeed !== 0){\r\n                        this.vel = this.vel.unit().mult(this.maxSpeed);\r\n                    }\r\n                    this.angVel *= (1-this.angFriction);\r\n                }\r\n                keyControl(){}\r\n                remove(){\r\n                    if (BODIES.indexOf(this) !== -1){\r\n                        BODIES.splice(BODIES.indexOf(this), 1);\r\n                    }\r\n                }\r\n            }\r\n\r\n            class Ball extends Body{\r\n                constructor(x, y, r, m){\r\n                    super();\r\n                    this.pos = new Vector(x, y);\r\n                    this.comp = [new Circle(x, y, r)];\r\n                    this.m = m;\r\n                    if (this.m === 0){\r\n                        this.inv_m = 0;\r\n                    } else {\r\n                        this.inv_m = 1 / this.m;\r\n                    }\r\n                }\r\n\r\n                setPosition(x, y, a = this.angle){\r\n                    this.pos.set(x, y);\r\n                    this.comp[0].pos = this.pos;\r\n                }\r\n\r\n                reposition(){\r\n                    super.reposition();\r\n                    this.setPosition(this.pos.add(this.vel).x, this.pos.add(this.vel).y);\r\n                }\r\n\r\n                keyControl(){\r\n                    if(this.left){\r\n                        this.acc.x = -this.keyForce;\r\n                    }\r\n                    if(this.up){\r\n                        this.acc.y = -this.keyForce;\r\n                    }\r\n                    if(this.right){\r\n                        this.acc.x = this.keyForce;\r\n                    }\r\n                    if(this.down){\r\n                        this.acc.y = this.keyForce;\r\n                    }\r\n                    if(!this.left && !this.right){\r\n                        this.acc.x = 0;\r\n                    }\r\n                    if(!this.up && !this.down){\r\n                        this.acc.y = 0;\r\n                    }\r\n                }\r\n            }\r\n\r\n            class Capsule extends Body{\r\n                constructor(x1, y1, x2, y2, r, m){\r\n                    super();\r\n                    this.comp = [new Circle(x1, y1, r), new Circle(x2, y2, r)];\r\n                    let recV1 = this.comp[1].pos.add(this.comp[1].pos.subtr(this.comp[0].pos).unit().normal().mult(r));\r\n                    let recV2 = this.comp[0].pos.add(this.comp[1].pos.subtr(this.comp[0].pos).unit().normal().mult(r));\r\n                    this.comp.unshift(new Rectangle(recV1.x, recV1.y, recV2.x, recV2.y, 2*r));\r\n                    this.pos = this.comp[0].pos;\r\n                    this.m = m;\r\n                    if (this.m === 0){\r\n                        this.inv_m = 0;\r\n                    } else {\r\n                        this.inv_m = 1 / this.m;\r\n                    }\r\n                    this.inertia = this.m * ((2*this.comp[0].width)**2 +(this.comp[0].length+2*this.comp[0].width)**2) / 12;\r\n                    if (this.m === 0){\r\n                        this.inv_inertia = 0;\r\n                    } else {\r\n                        this.inv_inertia = 1 / this.inertia;\r\n                    }\r\n                }\r\n\r\n                keyControl(){\r\n                    if(this.up){\r\n                        this.acc = this.comp[0].dir.mult(-this.keyForce);\r\n                    }\r\n                    if(this.down){\r\n                        this.acc = this.comp[0].dir.mult(this.keyForce);\r\n                    }\r\n                    if(this.left){\r\n                        this.angVel = -this.angKeyForce;\r\n                    }\r\n                    if(this.right){\r\n                        this.angVel = this.angKeyForce;\r\n                    }\r\n                    if(!this.up && !this.down){\r\n                        this.acc.set(0, 0);\r\n                    }\r\n                }\r\n\r\n                setPosition(x, y, a = this.angle){\r\n                    this.pos.set(x, y);\r\n                    this.angle = a;\r\n                    this.comp[0].pos = this.pos;\r\n                    this.comp[0].getVertices(this.angle + this.angVel);\r\n                    this.comp[1].pos = this.comp[0].pos.add(this.comp[0].dir.mult(-this.comp[0].length/2));\r\n                    this.comp[2].pos = this.comp[0].pos.add(this.comp[0].dir.mult(this.comp[0].length/2));\r\n                    this.angle += this.angVel;\r\n                }\r\n\r\n                reposition(){\r\n                    super.reposition();\r\n                    this.setPosition(this.pos.add(this.vel).x, this.pos.add(this.vel).y);\r\n                }\r\n            }\r\n\r\n            class Box extends Body{\r\n                constructor(x1, y1, x2, y2, w, m){\r\n                    super();\r\n                    this.comp = [new Rectangle(x1, y1, x2, y2, w)];\r\n                    this.pos = this.comp[0].pos;\r\n                    this.m = m;\r\n                    if (this.m === 0){\r\n                        this.inv_m = 0;\r\n                    } else {\r\n                        this.inv_m = 1 / this.m;\r\n                    }\r\n                    this.inertia = this.m * (this.comp[0].width**2 +this.comp[0].length**2) / 12;\r\n                    if (this.m === 0){\r\n                        this.inv_inertia = 0;\r\n                    } else {\r\n                        this.inv_inertia = 1 / this.inertia;\r\n                    }\r\n                }\r\n\r\n                keyControl(){\r\n                    if(this.up){\r\n                        this.acc = this.comp[0].dir.mult(-this.keyForce);;\r\n                    }\r\n                    if(this.down){\r\n                        this.acc = this.comp[0].dir.mult(this.keyForce);;\r\n                    }\r\n                    if(this.left){\r\n                        this.angVel = -this.angKeyForce;\r\n                    }\r\n                    if(this.right){\r\n                        this.angVel = this.angKeyForce;\r\n                    }\r\n                    if(!this.up && !this.down){\r\n                        this.acc.set(0,0);\r\n                    }\r\n                }\r\n\r\n                setPosition(x, y, a = this.angle){\r\n                    this.pos.set(x, y);\r\n                    this.angle = a;\r\n                    this.comp[0].pos = this.pos;\r\n                    this.comp[0].getVertices(this.angle + this.angVel);\r\n                    this.angle += this.angVel;\r\n                }\r\n\r\n                reposition(){\r\n                    super.reposition();\r\n                    this.setPosition(this.pos.add(this.vel).x, this.pos.add(this.vel).y);\r\n                }\r\n            }\r\n\r\n            class Star extends Body{\r\n                constructor(x1, y1, r, m){\r\n                    super();\r\n                    this.comp = [];\r\n                    this.r = r;\r\n                    let center = new Vector(x1, y1);\r\n                    let upDir = new Vector(0, -1);\r\n                    let p1 = center.add(upDir.mult(r));\r\n                    let p2 = center.add(upDir.mult(-r/2)).add(upDir.normal().mult(-r*Math.sqrt(3)/2));\r\n                    let p3 = center.add(upDir.mult(-r/2)).add(upDir.normal().mult(r*Math.sqrt(3)/2));\r\n                    this.comp.push(new Triangle(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y));\r\n                    p1 = center.add(upDir.mult(-r));\r\n                    p2 = center.add(upDir.mult(r/2)).add(upDir.normal().mult(-r*Math.sqrt(3)/2));\r\n                    p3 = center.add(upDir.mult(r/2)).add(upDir.normal().mult(r*Math.sqrt(3)/2));\r\n                    this.comp.push(new Triangle(p1.x, p1.y, p2.x, p2.y, p3.x, p3.y));\r\n                    this.pos = this.comp[0].pos;\r\n                    \r\n                    this.m = m;\r\n                    if (this.m === 0){\r\n                        this.inv_m = 0;\r\n                    } else {\r\n                        this.inv_m = 1 / this.m;\r\n                    }\r\n                    this.inertia = this.m * ((2*this.r)**2) / 12;\r\n                    if (this.m === 0){\r\n                        this.inv_inertia = 0;\r\n                    } else {\r\n                        this.inv_inertia = 1 / this.inertia;\r\n                    }\r\n                }\r\n\r\n                keyControl(){\r\n                    if(this.up){\r\n                        this.acc = this.comp[0].dir.mult(-this.keyForce);\r\n                    }\r\n                    if(this.down){\r\n                        this.acc = this.comp[0].dir.mult(this.keyForce);\r\n                    }\r\n                    if(this.left){\r\n                        this.angVel = -this.angKeyForce;\r\n                    }\r\n                    if(this.right){\r\n                        this.angVel = this.angKeyForce;\r\n                    }\r\n                    if(!this.up && !this.down){\r\n                        this.acc.set(0,0);\r\n                    }\r\n                }\r\n\r\n                setPosition(x, y, a = this.angle){\r\n                    this.pos.set(x, y);\r\n                    this.angle = a;\r\n                    this.comp[0].pos = this.pos;\r\n                    this.comp[1].pos = this.pos;\r\n                    this.comp[0].getVertices(this.angle + this.angVel);\r\n                    this.comp[1].getVertices(this.angle + this.angVel);\r\n                    this.angle += this.angVel;\r\n                }\r\n\r\n                reposition(){\r\n                    super.reposition();\r\n                    this.setPosition(this.pos.add(this.vel).x, this.pos.add(this.vel).y);\r\n            }\r\n            }\r\n\r\n            class Wall extends Body{\r\n                constructor(x1, y1, x2, y2){\r\n                    super();\r\n                    this.comp = [new Line(x1, y1, x2, y2)];\r\n                    this.pos = new Vector((x1+x2)/2, (y1+y2)/2);\r\n                }\r\n            }\r\n\r\n            //Collision manifold, consisting the data for collision handling\r\n            //Manifolds are collected in an array for every frame\r\n            class CollData{\r\n                constructor(o1, o2, normal, pen, cp){\r\n                    this.o1 = o1;\r\n                    this.o2 = o2;\r\n                    this.normal = normal;\r\n                    this.pen = pen;\r\n                    this.cp = cp;\r\n                }\r\n\r\n                penRes(){\r\n                    let penResolution = this.normal.mult(this.pen / (this.o1.inv_m + this.o2.inv_m));\r\n                    this.o1.pos = this.o1.pos.add(penResolution.mult(this.o1.inv_m));\r\n                    this.o2.pos = this.o2.pos.add(penResolution.mult(-this.o2.inv_m));\r\n                }\r\n\r\n                collRes(){\r\n                    //1. Closing velocity\r\n                    let collArm1 = this.cp.subtr(this.o1.comp[0].pos);\r\n                    let rotVel1 = new Vector(-this.o1.angVel * collArm1.y, this.o1.angVel * collArm1.x);\r\n                    let closVel1 = this.o1.vel.add(rotVel1);\r\n                    let collArm2 = this.cp.subtr(this.o2.comp[0].pos);\r\n                    let rotVel2= new Vector(-this.o2.angVel * collArm2.y, this.o2.angVel * collArm2.x);\r\n                    let closVel2 = this.o2.vel.add(rotVel2);\r\n\r\n                    //2. Impulse augmentation\r\n                    let impAug1 = Vector.cross(collArm1, this.normal);\r\n                    impAug1 = impAug1 * this.o1.inv_inertia * impAug1;\r\n                    let impAug2 = Vector.cross(collArm2, this.normal);\r\n                    impAug2 = impAug2 * this.o2.inv_inertia * impAug2;\r\n\r\n                    let relVel = closVel1.subtr(closVel2);\r\n                    let sepVel = Vector.dot(relVel, this.normal);\r\n                    let new_sepVel = -sepVel * Math.min(this.o1.elasticity, this.o2.elasticity);\r\n                    let vsep_diff = new_sepVel - sepVel;\r\n\r\n                    let impulse = vsep_diff / (this.o1.inv_m + this.o2.inv_m + impAug1 + impAug2);\r\n                    let impulseVec = this.normal.mult(impulse);\r\n\r\n                    //3. Changing the velocities\r\n                    this.o1.vel = this.o1.vel.add(impulseVec.mult(this.o1.inv_m));\r\n                    this.o2.vel = this.o2.vel.add(impulseVec.mult(-this.o2.inv_m));\r\n\r\n                    this.o1.angVel += this.o1.inv_inertia * Vector.cross(collArm1, impulseVec);\r\n                    this.o2.angVel -= this.o2.inv_inertia * Vector.cross(collArm2, impulseVec); \r\n                }\r\n            }\r\n\r\n            function round(number, precision){\r\n                let factor = 10**precision;\r\n                return Math.round(number * factor) / factor;\r\n            }\r\n\r\n            function randInt(min, max){\r\n                return Math.floor(Math.random() * (max-min+1)) + min;\r\n            }\r\n\r\n            function testCircle(x, y, color=\"black\"){\r\n                ctx.beginPath();\r\n                ctx.arc(x, y, 10, 0, 2*Math.PI);\r\n                ctx.strokeStyle = color;\r\n                ctx.stroke();\r\n                ctx.closePath();\r\n            }\r\n\r\n            function closestPointOnLS(p, w1){\r\n                let ballToWallStart = w1.start.subtr(p);\r\n                if(Vector.dot(w1.dir, ballToWallStart) > 0){\r\n                    return w1.start;\r\n                }\r\n\r\n                let wallEndToBall = p.subtr(w1.end);\r\n                if(Vector.dot(w1.dir, wallEndToBall) > 0){\r\n                    return w1.end;\r\n                }\r\n\r\n                let closestDist = Vector.dot(w1.dir, ballToWallStart);\r\n                let closestVect = w1.dir.mult(closestDist);\r\n                return w1.start.subtr(closestVect);\r\n            }\r\n\r\n            //Separating axis theorem on two objects\r\n            //Returns with the details of the Minimum Translation Vector (or false if no collision)\r\n            function sat(o1, o2){\r\n                let minOverlap = null;\r\n                let smallestAxis;\r\n                let vertexObj;\r\n\r\n                let axes = findAxes(o1, o2);\r\n                let proj1, proj2 = 0;\r\n                let firstShapeAxes = getShapeAxes(o1);\r\n\r\n                for(let i=0; i<axes.length; i++){\r\n                    proj1 = projShapeOntoAxis(axes[i], o1);\r\n                    proj2 = projShapeOntoAxis(axes[i], o2);\r\n                    let overlap = Math.min(proj1.max, proj2.max) - Math.max(proj1.min, proj2.min);\r\n                    if (overlap < 0){\r\n                        return false;\r\n                    }\r\n\r\n                    if((proj1.max > proj2.max && proj1.min < proj2.min) ||\r\n                    (proj1.max < proj2.max && proj1.min > proj2.min)){\r\n                        let mins = Math.abs(proj1.min - proj2.min);\r\n                        let maxs = Math.abs(proj1.max - proj2.max);\r\n                        if (mins < maxs){\r\n                            overlap += mins;\r\n                        } else {\r\n                            overlap += maxs;\r\n                            axes[i] = axes[i].mult(-1);\r\n                        }\r\n                    }\r\n\r\n                    if (overlap < minOverlap || minOverlap === null){\r\n                        minOverlap = overlap;\r\n                        smallestAxis = axes[i];\r\n                        if (i<firstShapeAxes){\r\n                            vertexObj = o2;\r\n                            if(proj1.max > proj2.max){\r\n                                smallestAxis = axes[i].mult(-1);\r\n                            }\r\n                        } else {\r\n                            vertexObj = o1;\r\n                            if(proj1.max < proj2.max){\r\n                                smallestAxis = axes[i].mult(-1);\r\n                            }\r\n                        }\r\n                    }  \r\n                };\r\n\r\n                let contactVertex = projShapeOntoAxis(smallestAxis, vertexObj).collVertex;\r\n                //smallestAxis.drawVec(contactVertex.x, contactVertex.y, minOverlap, \"blue\");\r\n\r\n                if(vertexObj === o2){\r\n                    smallestAxis = smallestAxis.mult(-1);\r\n                }\r\n\r\n                return {\r\n                    pen: minOverlap,\r\n                    axis: smallestAxis,\r\n                    vertex: contactVertex\r\n                }\r\n            }\r\n\r\n            //Helping functions for the SAT below\r\n            //returns the min and max projection values of a shape onto an axis\r\n            function projShapeOntoAxis(axis, obj){\r\n                setBallVerticesAlongAxis(obj, axis);\r\n                let min = Vector.dot(axis, obj.vertex[0]);\r\n                let max = min;\r\n                let collVertex = obj.vertex[0];\r\n                for(let i=0; i<obj.vertex.length; i++){\r\n                    let p = Vector.dot(axis, obj.vertex[i]);\r\n                    if(p<min){\r\n                        min = p;\r\n                        collVertex = obj.vertex[i];\r\n                    } \r\n                    if(p>max){\r\n                        max = p;\r\n                    }\r\n                }\r\n                return {\r\n                    min: min,\r\n                    max: max, \r\n                    collVertex: collVertex\r\n                }\r\n            }\r\n\r\n            //finds the projection axes for the two objects\r\n            function findAxes(o1, o2){\r\n                let axes = [];\r\n                if(o1 instanceof Circle && o2 instanceof Circle){\r\n                    if(o2.pos.subtr(o1.pos).mag() > 0){\r\n                        axes.push(o2.pos.subtr(o1.pos).unit());\r\n                    } else {\r\n                        axes.push(new Vector(Math.random(), Math.random()).unit());\r\n                    }        \r\n                    return axes;\r\n                }\r\n                if(o1 instanceof Circle){\r\n                    axes.push(closestVertexToPoint(o2, o1.pos).subtr(o1.pos).unit());\r\n                }\r\n                if(o1 instanceof Line){\r\n                    axes.push(o1.dir.normal());\r\n                }   \r\n                if (o1 instanceof Rectangle){\r\n                    axes.push(o1.dir.normal());\r\n                    axes.push(o1.dir);\r\n                }\r\n                if (o1 instanceof Triangle){\r\n                    axes.push(o1.vertex[1].subtr(o1.vertex[0]).normal());\r\n                    axes.push(o1.vertex[2].subtr(o1.vertex[1]).normal());\r\n                    axes.push(o1.vertex[0].subtr(o1.vertex[2]).normal());\r\n                }\r\n                if (o2 instanceof Circle){\r\n                    axes.push(closestVertexToPoint(o1, o2.pos).subtr(o2.pos).unit());\r\n                }\r\n                if (o2 instanceof Line){\r\n                    axes.push(o2.dir.normal());\r\n                }   \r\n                if (o2 instanceof Rectangle){\r\n                    axes.push(o2.dir.normal());\r\n                    axes.push(o2.dir);\r\n                }\r\n                if (o2 instanceof Triangle){\r\n                    axes.push(o2.vertex[1].subtr(o2.vertex[0]).normal());\r\n                    axes.push(o2.vertex[2].subtr(o2.vertex[1]).normal());\r\n                    axes.push(o2.vertex[0].subtr(o2.vertex[2]).normal());\r\n                }\r\n                return axes;\r\n            }\r\n\r\n            //iterates through an objects vertices and returns the one that is the closest to the given point\r\n            function closestVertexToPoint(obj, p){\r\n                let closestVertex;\r\n                let minDist = null;\r\n                for(let i=0; i<obj.vertex.length; i++){\r\n                    if(p.subtr(obj.vertex[i]).mag() < minDist || minDist === null){\r\n                        closestVertex = obj.vertex[i];\r\n                        minDist = p.subtr(obj.vertex[i]).mag();\r\n                    }\r\n                }\r\n                return closestVertex;\r\n            }\r\n\r\n            //returns the number of the axes that belong to an object\r\n            function getShapeAxes(obj){\r\n                if(obj instanceof Circle || obj instanceof Line){\r\n                    return 1;\r\n                }\r\n                if(obj instanceof Rectangle){\r\n                    return 2;\r\n                }\r\n                if(obj instanceof Triangle){\r\n                    return 3;\r\n                }\r\n            }\r\n\r\n            //the ball vertices always need to be recalculated based on the current projection axis direction\r\n            function setBallVerticesAlongAxis(obj, axis){\r\n                if(obj instanceof Circle){\r\n                    obj.vertex[0] = obj.pos.add(axis.unit().mult(-obj.r));\r\n                    obj.vertex[1] = obj.pos.add(axis.unit().mult(obj.r));\r\n                }\r\n            }\r\n            //Thats it for the SAT and its support functions\r\n\r\n            //Prevents objects to float away from the canvas\r\n            function putWallsAround(x1, y1, x2, y2){\r\n                let edge1 = new Wall(x1, y1, x2, y1);\r\n                let edge2 = new Wall(x2, y1, x2, y2);\r\n                let edge3 = new Wall(x2, y2, x1, y2);\r\n                let edge4 = new Wall(x1, y2, x1, y1);\r\n            }\r\n\r\n            function collide(o1, o2){\r\n                let bestSat = {\r\n                    pen: null,\r\n                    axis: null,\r\n                    vertex: null\r\n                }\r\n                for(let o1comp=0; o1comp<o1.comp.length; o1comp++){\r\n                    for(let o2comp=0; o2comp<o2.comp.length; o2comp++){\r\n                        if(sat(o1.comp[o1comp], o2.comp[o2comp]).pen > bestSat.pen){\r\n                            bestSat = sat(o1.comp[o1comp], o2.comp[o2comp]);\r\n                        }\r\n                    }\r\n                }\r\n                if (bestSat.pen !== null){\r\n                    return bestSat;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            function userInteraction(){\r\n                BODIES.forEach((b) => {\r\n                    b.keyControl();\r\n                })\r\n            }\r\n\r\n            function gameLogic(){}\r\n\r\n            function physicsLoop(timestamp) {\r\n                COLLISIONS.length = 0;\r\n                \r\n                BODIES.forEach((b) => {\r\n                    b.reposition();\r\n                })\r\n                \r\n                BODIES.forEach((b, index) => {\r\n                    for(let bodyPair = index+1; bodyPair < BODIES.length; bodyPair++){\r\n                    if((BODIES[index].layer === BODIES[bodyPair].layer ||\r\n                        BODIES[index].layer === 0 || BODIES[bodyPair].layer === 0) && \r\n                        collide(BODIES[index], BODIES[bodyPair])){\r\n                                let bestSat = collide(BODIES[index], BODIES[bodyPair]);\r\n                                COLLISIONS.push(new CollData(BODIES[index], BODIES[bodyPair], bestSat.axis, bestSat.pen, bestSat.vertex));\r\n                    }\r\n                    }\r\n                });\r\n\r\n                COLLISIONS.forEach((c) => {\r\n                    c.penRes();\r\n                    c.collRes();\r\n                });\r\n            }\r\n\r\n            //If anything else (text, data...) needs to be rendered on the canvas\r\n            //function userInterface(){};\r\n\r\n            function renderLoop(){\r\n                ctx.clearRect(0, 0, 640, 480);\r\n                BODIES.forEach((b) => {\r\n                    b.render();\r\n                })\r\n                userInterface();\r\n            }\r\n\r\n            function mainLoop(){\r\n                userInteraction();\r\n                physicsLoop();\r\n                renderLoop();\r\n                gameLogic();\r\n                requestAnimationFrame(mainLoop);\r\n            }\r\n\r\n            function renderOnly(){\r\n                renderLoop();\r\n                requestAnimationFrame(renderOnly);\r\n            }\r\n\r\n            //II. USERINPUT HERE\r\n            let justPressed = false;\r\n\r\n            //Event listeners for the arrow keys\r\n            function userInput(obj){\r\n                window.addEventListener('keydown', function(e){\r\n                    if(gameReady){\r\n                    if(e.code === \"ArrowLeft\"){\r\n                        if(obj.left === false){\r\n                            justPressed = true;\r\n                        }\r\n                        obj.left = true;\r\n                    }\r\n                    if(e.code === \"ArrowUp\"){\r\n                        if(obj.up === false){\r\n                            justPressed = true;\r\n                        }\r\n                        obj.up = true;\r\n                    }\r\n                    if(e.code === \"ArrowRight\"){\r\n                        if(obj.right === false){\r\n                            justPressed = true;\r\n                        }\r\n                        obj.right = true;\r\n                    }\r\n                    if(e.code === \"ArrowDown\"){\r\n                        if(obj.down === false){\r\n                            justPressed = true;\r\n                        }\r\n                        obj.down = true;\r\n                    }\r\n                    if(e.code === \"Space\"){\r\n                        if(obj.action === false){\r\n                            justPressed = true;\r\n                        }\r\n                        obj.action = true;\r\n                    }\r\n                    if (justPressed === true){\r\n                        emitUserCommands(obj);\r\n                        justPressed = false;\r\n                    }\r\n                    }\r\n                });\r\n                \r\n                window.addEventListener('keyup', function(e){\r\n                    if(gameReady){\r\n                    if(e.code === \"ArrowLeft\"){\r\n                        obj.left = false;\r\n                    }\r\n                    if(e.code === \"ArrowUp\"){\r\n                        obj.up = false;\r\n                    }\r\n                    if(e.code === \"ArrowRight\"){\r\n                        obj.right = false;\r\n                    }\r\n                    if(e.code === \"ArrowDown\"){\r\n                        obj.down = false;\r\n                    }\r\n                    if(e.code === \"Space\"){\r\n                        obj.action = false;\r\n                    }\r\n                    emitUserCommands(obj);\r\n                    }\r\n                });    \r\n            }\r\n\r\n            function emitUserCommands(obj){\r\n                if(countDownSec <= 0){\r\n                    let userCommands = {\r\n                        left: obj.left,\r\n                        up: obj.up,\r\n                        right: obj.right,\r\n                        down: obj.down,\r\n                        action: obj.action\r\n                    }\r\n                    socket.emit('userCommands', userCommands);\r\n                } \r\n            }\r\n\r\n            //III. GAME HERE\r\n            buildStadium()\r\n            if(clientBalls[p1ID]){\r\n                clientBalls[p1ID].remove();\r\n                delete clientBalls[p1ID];\r\n            }\r\n            if(clientBalls[p2ID]){\r\n                clientBalls[p2ID].remove();\r\n                delete clientBalls[p2ID];\r\n            }\r\n            if(football){\r\n                football.remove();\r\n            }\r\n\r\n            socket.emit(\"componentReady\")\r\n\r\n            socket.on('gameSetup', data => {\r\n                console.log(\"Gamesetup happens NOW\")\r\n                selfID = socket.id\r\n                p1ID = data.p1ID\r\n                p2ID = data.p2ID\r\n                clientBalls[data.p1ID] = new Capsule(data.p1X+35, data.p1Y, data.p1X-35, data.p1Y, 25, 10);\r\n                clientBalls[data.p1ID].no = 1;\r\n                clientBalls[data.p1ID].name = data.p1name;\r\n                clientBalls[data.p1ID].color = \"lightblue\";\r\n                clientBalls[data.p1ID].score = data.p1score\r\n                clientBalls[data.p1ID].point = data.p1point\r\n                clientBalls[data.p1ID].msg = \"\"\r\n                clientBalls[data.p2ID] = new Capsule(data.p2X+35, data.p2Y, data.p2X-35, data.p2Y, 25, 10);\r\n                clientBalls[data.p2ID].no = 2;\r\n                clientBalls[data.p2ID].name = data.p2name;\r\n                clientBalls[data.p2ID].color = \"lightgreen\";\r\n                clientBalls[data.p2ID].score = data.p2score\r\n                clientBalls[data.p2ID].point = data.p2point\r\n                clientBalls[data.p2ID].msg = \"\"\r\n                football = new Ball(data.ballX, data.ballY, 20, 10);\r\n                football.color = \"red\";\r\n                if(gameReady === false){\r\n                    gameReady = true\r\n                    countDown()\r\n                }\r\n                userInput(clientBalls[selfID]);\r\n            })\r\n\r\n            socket.on(\"positionUpdate\", data => {\r\n                clientBalls[p1ID].setPosition(data.p1X, data.p1Y, data.p1A)\r\n                clientBalls[p2ID].setPosition(data.p2X, data.p2Y, data.p2A)\r\n                football.setPosition(data.ballX, data.ballY);\r\n            })\r\n\r\n            socket.on('updateScore', newScore => {\r\n                if(newScore.roundWin === 1){\r\n                    document.body.style.backgroundColor = \"lightskyblue\";\r\n                }\r\n                if(newScore.roundWin === 2){\r\n                    document.body.style.backgroundColor = \"limegreen\";\r\n                }\r\n                if(newScore.roundWin !== 0){\r\n                    countDown()\r\n                }\r\n                if(newScore.gameWin !== 0){\r\n                    document.body.style.backgroundColor = \"white\";\r\n                    gameReady = false\r\n                    history.push(\"/gameover\");                \r\n                }                     \r\n                clientBalls[p1ID].score = newScore.p1score\r\n                clientBalls[p1ID].point = newScore.p1point\r\n                clientBalls[p2ID].score = newScore.p2score\r\n                clientBalls[p2ID].point = newScore.p2point\r\n            })\r\n\r\n            //if the other player quits the game\r\n            socket.on(\"gameConfirm\", confirmed => {\r\n                gameReady = false\r\n                console.log(\"CLEAN UP TIME! \", confirmed)\r\n                if(!confirmed){\r\n                    socket.emit(\"cleanUpRoom\")\r\n                    history.push(\"/\");\r\n                }\r\n            })\r\n\r\n            //if someone came to the URL directly\r\n            socket.on(\"redirectToLobby\", () => {\r\n                history.push(\"/\");\r\n            })\r\n            \r\n            socket.on('deletePlayer', playerID => {\r\n                if(clientBalls[playerID]){\r\n                    clientBalls[playerID].remove();\r\n                    delete clientBalls[playerID];\r\n                    clientBalls[selfID].remove();\r\n                    delete clientBalls[selfID];\r\n                    football.remove();\r\n                    gameReady = false\r\n                    socket.emit(\"gameConfirm\", false)\r\n                    history.push(\"/\");\r\n                    //delete football;\r\n                }\r\n            })\r\n\r\n            socket.on(\"inGameMsg\", data => {\r\n                if(data.playerno === 1){\r\n                    clientBalls[p1ID].msg = data.msg\r\n                }\r\n                if(data.playerno === 2){\r\n                    clientBalls[p2ID].msg = data.msg\r\n                }\r\n            })\r\n\r\n            requestAnimationFrame(renderOnly);\r\n            \r\n            function userInterface(){\r\n                //displaying scores ***\r\n                if(clientBalls[p1ID]){\r\n                    ctx.font = \"60px Arial\";\r\n                    ctx.fillStyle = \"blue\";\r\n                    ctx.textAlign = \"center\";\r\n                    switch(clientBalls[p1ID].point){\r\n                        case 0: \r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 30, 100)\r\n                            ctx.fillText(\"*\", 30, 75)\r\n                            ctx.fillText(\"*\", 30, 50)\r\n                            break\r\n                        case 1: \r\n                            ctx.fillText(\"*\", 30, 100)\r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 30, 75)\r\n                            ctx.fillText(\"*\", 30, 50)\r\n                            break\r\n                        case 2: \r\n                            ctx.fillText(\"*\", 30, 100)\r\n                            ctx.fillText(\"*\", 30, 75)\r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 30, 50)\r\n                            break\r\n                    }\r\n                    ctx.font = \"30px Arial\";\r\n                    ctx.fillStyle = \"blue\";\r\n                    ctx.textAlign = \"right\";\r\n                    ctx.fillText(`${clientBalls[p1ID].name}`, 270, 30);\r\n                    ctx.font = \"bold 45px Arial\";\r\n                    ctx.fillStyle = \"blue\";\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.fillText(`${clientBalls[p1ID].point}`, 300, 35);\r\n                    ctx.font = \"italic 20px Trebuchet MS\";\r\n                    ctx.fillStyle = \"blue\";\r\n                    ctx.textAlign = \"right\";\r\n                    ctx.fillText(`${clientBalls[p1ID].msg}`, 310, 70);\r\n                }\r\n                if(clientBalls[p2ID]){\r\n                    ctx.font = \"60px Arial\";\r\n                    ctx.fillStyle = \"green\";\r\n                    ctx.textAlign = \"center\";\r\n                    switch(clientBalls[p2ID].point){\r\n                        case 0: \r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 610, 100)\r\n                            ctx.fillText(\"*\", 610, 75)\r\n                            ctx.fillText(\"*\", 610, 50)\r\n                            break\r\n                        case 1: \r\n                            ctx.fillText(\"*\", 610, 100)\r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 610, 75)\r\n                            ctx.fillText(\"*\", 610, 50)\r\n                            break\r\n                        case 2: \r\n                            ctx.fillText(\"*\", 610, 100)\r\n                            ctx.fillText(\"*\", 610, 75)\r\n                            ctx.fillStyle = \"silver\"\r\n                            ctx.fillText(\"*\", 610, 50)\r\n                            break\r\n                    }\r\n                    ctx.font = \"bold 45px Arial\";\r\n                    ctx.fillStyle = \"green\";\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.fillText(`${clientBalls[p2ID].point}`, 340, 35);\r\n                    ctx.font = \"30px Arial\";\r\n                    ctx.fillStyle = \"green\";\r\n                    ctx.textAlign = \"left\";\r\n                    ctx.fillText(`${clientBalls[p2ID].name}`, 370, 30);\r\n                    ctx.font = \"italic 20px Trebuchet MS\";\r\n                    ctx.fillStyle = \"green\";\r\n                    ctx.textAlign = \"left\";\r\n                    ctx.fillText(`${clientBalls[p2ID].msg}`, 330, 70);\r\n                }\r\n                ctx.font = \"30px Arial\";\r\n                if (countDownSec > 0) {\r\n                    ctx.font = \"30px Arial\";\r\n                    ctx.fillStyle = \"red\";\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.fillText(`START IN ${countDownSec}...`, 320, 200);\r\n                }\r\n                if (gameReady === false) {\r\n                    ctx.font = \"20px Arial\";\r\n                    ctx.fillStyle = \"black\";\r\n                    ctx.textAlign = \"center\";\r\n                    ctx.fillText(`waiting to start....`, 320, 30);\r\n                }\r\n            }\r\n            \r\n            function buildStadium(){\r\n                new Wall(60, 80, 580, 80)\r\n                new Wall(60, 480, 580, 480)\r\n                new Wall(0, 370, 0, 190)\r\n                new Wall(640, 370, 640, 190)\r\n            \r\n                new Box(0, 80, 60, 80, 110, 0)\r\n                new Box(580, 80, 640, 80, 110, 0)\r\n                new Box(0, 370, 60, 370, 110, 0)\r\n                new Box(580, 370, 640, 370, 110, 0)\r\n            }\r\n            \r\n            const countDown = () => {\r\n                countDownSec = 3\r\n                let count = setInterval(() => {\r\n                    countDownSec--\r\n                }, 1000)\r\n                setTimeout(() => {\r\n                    clearInterval(count)\r\n                }, 3000)\r\n            }\r\n        } \r\n    }, [ctx]);\r\n\r\n    const handleChange = (e) => {\r\n        if(e.target.value.length < 26){\r\n            setChatMessage(e.target.value)\r\n        }\r\n    }\r\n\r\n    const newMessageSubmit = (e) => {\r\n        e.preventDefault()\r\n        if(clientBalls[selfID]){\r\n            socket.emit(\"inGameMsg\", {\r\n                msg: chatMessage,\r\n                playerno: clientBalls[selfID].no})\r\n            setChatMessage(\"\")\r\n        }\r\n        canvasRef.current.focus();\r\n    }\r\n\r\n    const quitGame = () => {\r\n        if(clientBalls[p1ID] && clientBalls[p2ID] &&\r\n            ((clientBalls[p1ID].point > 1) || (clientBalls[p2ID].point > 1))){\r\n                socket.emit(\"inGameMsg\", {\r\n                    msg: \"IT'S NOT THE TIME TO QUIT!!\",\r\n                    playerno: clientBalls[selfID].no})\r\n            } else {\r\n                gameReady = false\r\n                socket.emit(\"gameConfirm\", false)\r\n                history.push(\"/\");\r\n            }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"InGameDiv\">\r\n                <canvas id=\"canvas\" ref={canvasRef} tabindex=\"0\" width={640} height={480} /> \r\n                <div className=\"GameFooter\">\r\n                    <form id=\"gamemsg\" onSubmit={newMessageSubmit}>\r\n                        <input type=\"text\" name=\"msg\" \r\n                            value={chatMessage} placeholder=\"Send a Message!\"\r\n                            onChange={handleChange} required style={{ width: \"80%\" }} />\r\n                        <input type=\"submit\" value=\"Message!\" style={{ width: \"20%\" }}/>\r\n                    </form>\r\n                    <Button className=\"QuitButton\" onClick={quitGame}>QUIT GAME</Button>\r\n                </div>           \r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Game\r\n","import React from \"react\";\r\n\r\nconst ErrorMsg = (props) => {\r\n  return (\r\n    <div>\r\n      <span className=\"ErrorMsg\">\r\n        <b>{props.msg}</b>\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ErrorMsg;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { UserContext } from \"../../App\";\r\nimport ErrorMsg from \"./ErrorMsg\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport \"./AuthStyle.css\"\r\n\r\nconst Register = () => {\r\n  const { userData, setUserData } = useContext(UserContext);\r\n\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    password: \"\",\r\n    passwordAgain: \"\",\r\n  });\r\n  const [errorMsg, setErrorMsg] = useState();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const newUser = {\r\n        name: user.name,\r\n        password: user.password,\r\n      };\r\n\r\n      if (user.password !== user.passwordAgain) {\r\n        setErrorMsg(\"Enter the same password twice!\");\r\n        return;\r\n      } else {\r\n        console.log(newUser);\r\n      }\r\n      await axios.post(\"/api/users/register\", newUser);\r\n\r\n      const loginResponse = await axios.post(\"/api/users/login\", newUser);\r\n      setUserData({\r\n        token: loginResponse.data.token,\r\n        user: loginResponse.data.user,\r\n      });\r\n      localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n\r\n      setUser({\r\n        name: \"\",\r\n        password: \"\",\r\n        passwordAgain: \"\",\r\n      });\r\n\r\n      window.location = \"/\";\r\n    } catch (err) {\r\n      err.response.data.msg\r\n        ? setErrorMsg(err.response.data.msg)\r\n        : setErrorMsg(\"We have some error!\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser((oldUser) => {\r\n      return {\r\n        ...oldUser,\r\n        [name]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"RegisterComponent\">\r\n      <form className=\"RegisterForm\" onSubmit={handleSubmit}>\r\n        <label>Username:&nbsp; </label>\r\n        <input type=\"text\" name=\"name\" value={user.name}\r\n          required onChange={handleChange} />\r\n        <br />\r\n        <label>Password:&nbsp; </label>\r\n        <input type=\"password\" name=\"password\"  value={user.password}\r\n          onChange={handleChange} />\r\n        <br />\r\n        <label>Password Again:&nbsp; </label>\r\n        <input type=\"password\" name=\"passwordAgain\" value={user.passwordAgain}\r\n          onChange={handleChange} />\r\n        <br />\r\n        <Button className=\"RegisterBtn\" variant=\"success\" type=\"submit\">Reg!</Button>\r\n      </form>\r\n      {errorMsg && <ErrorMsg msg={errorMsg} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState, useContext } from \"react\";\r\nimport { UserContext } from \"../../App\";\r\nimport ErrorMsg from \"./ErrorMsg\";\r\nimport axios from \"axios\";\r\nimport { Button } from \"react-bootstrap\";\r\nimport \"./AuthStyle.css\"\r\n\r\nconst Login = () => {\r\n  const { userData, setUserData } = useContext(UserContext);\r\n\r\n  const [user, setUser] = useState({\r\n    name: \"\",\r\n    password: \"\",\r\n  });\r\n  const [errorMsg, setErrorMsg] = useState();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const newUser = {\r\n        name: user.name,\r\n        password: user.password,\r\n      };\r\n\r\n      const loginResponse = await axios.post(\"/api/users/login\", newUser);\r\n      //console.log(loginResponse.data)\r\n      setUserData({\r\n        token: loginResponse.data.token,\r\n        user: loginResponse.data.user,\r\n      });\r\n      localStorage.setItem(\"auth-token\", loginResponse.data.token);\r\n\r\n      setUser({\r\n        name: \"\",\r\n        password: \"\",\r\n      });\r\n\r\n      window.location = \"/\";\r\n    } catch (err) {\r\n      err.response.data.msg\r\n        ? setErrorMsg(err.response.data.msg)\r\n        : setErrorMsg(\"We have an error!\");\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser((oldUser) => {\r\n      return {\r\n        ...oldUser,\r\n        [name]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div className=\"LoginComponent\">\r\n      <form className=\"LoginForm\" onSubmit={handleSubmit}>\r\n        <label>Username:</label>\r\n        <br />\r\n        <input type=\"text\" name=\"name\" value={user.name}\r\n          required onChange={handleChange} />\r\n        <br />\r\n        <label>Password:</label>\r\n        <br />\r\n        <input type=\"password\" name=\"password\" value={user.password}\r\n          onChange={handleChange} />\r\n        <br />\r\n        <Button className=\"LoginBtn\" variant=\"success\" type=\"submit\">\r\n          Log In\r\n        </Button>\r\n      </form>\r\n      {errorMsg && <ErrorMsg msg={errorMsg} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState, useContext } from \"react\"\r\nimport { Navbar, Nav, Container, Button } from \"react-bootstrap\";\r\nimport axios from \"axios\"\r\nimport Register from \"./Register\"\r\nimport Login from \"./Login\"\r\nimport \"./AuthStyle.css\"\r\n\r\nconst Auth = () => {\r\n    const [login, setLogin] = useState(true);\r\n\r\n    return (\r\n        <div className=\"AuthBox\">\r\n            <Container>\r\n                <Button className=\"LoginLink\" onClick={() => setLogin(true)}>Login</Button> \r\n                <Button className=\"RegisterLink\" onClick={() => setLogin(false)}>Register</Button>\r\n                \r\n                {login ? \r\n                    <div>\r\n                        <div className=\"LoginMsg\">\r\n                            <p><b>WELCOME BACK</b> if you have been here before!</p>\r\n                            <p>If not, then quickly&nbsp;<span className=\"RegSpan\" onClick={() => setLogin(false)}>&nbsp;Register&nbsp;</span>&nbsp;please!</p>\r\n                        </div>\r\n                        <Login /> \r\n                    </div>\r\n                    : \r\n                    <div>\r\n                        <div className=\"RegisterMsg\">\r\n                            <p>Hi, just make up any nickname</p>\r\n                            <p>you'd like to play under, <b>that's all</b></p>\r\n                        </div>\r\n                        <Register />\r\n                    </div>\r\n                }\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Auth","import io from \"socket.io-client\";\r\n\r\nexport const socket = io();","import React, { useState, useEffect, useContext } from \"react\";\r\nimport { UserContext } from \"../App\"\r\nimport { socket } from \"./Socket\";\r\n\r\nimport \"./Lobby.css\"\r\n\r\nconst Chat = () => {\r\n    const { userData, setUserData } = useContext(UserContext)\r\n    const [msgList, setMsgList] = useState([])\r\n    const [chatMessage, setChatMessage] = useState({name: userData.user.name, msg: \"\"})\r\n \r\n    const handleChange = (e) => {\r\n        setChatMessage({...chatMessage, [e.target.name]: e.target.value})\r\n    }\r\n\r\n    const newMessageSubmit = (e) => {\r\n        e.preventDefault()\r\n        const newMessage = {\r\n            name: chatMessage.name,\r\n            msg: chatMessage.msg,\r\n        }\r\n\r\n        socket.emit(\"newChatMessage\", newMessage)\r\n\r\n        setChatMessage({\r\n            name: userData.user.name,\r\n            msg: \"\"\r\n        })\r\n    }\r\n\r\n    socket.on(\"newChatMessage\", newMessage => {\r\n        setMsgList([...msgList, {name: newMessage.name, msg: newMessage.msg}])\r\n    })\r\n\r\n    return (\r\n        <div className=\"ChatComponent\">\r\n            <form onSubmit={newMessageSubmit}>\r\n                <input type=\"text\" name=\"msg\" \r\n                    value={chatMessage.msg} placeholder=\"Type Your Message...\"\r\n                    onChange={handleChange} required style={{ width: \"80%\" }} />\r\n                <input type=\"submit\" value=\"Message!\" style={{ width: \"20%\" }}/>\r\n            </form>\r\n            <div className=\"ChatMessages\">\r\n                <center><p>....</p></center>\r\n                <ul style={{ listStyle:\"none\" }}>\r\n                    {msgList.map((msgList, index) => {\r\n                    return (\r\n                        <li key={index}>\r\n                        <b>{msgList.name}: </b>\r\n                            <i>\r\n                                {msgList.msg}\r\n                            </i>\r\n                        </li>\r\n                    )\r\n                    })}\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Chat\r\n","import React from 'react'\r\nimport { Button } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { socket } from \"./Socket\";\r\n\r\nconst PoolElem = (props) => {\r\n    const history = useHistory()\r\n\r\n    const startGame = () => {\r\n        //alert(`PLAYERS ARE ${props.name} and ${props.ownName}`)\r\n        socket.emit(\"gameRequest\", {p1name: props.ownName, p2name: props.name})\r\n        history.push(\"/gamesetup\");\r\n    }\r\n\r\n    socket.on(\"gameRequested\", (minRoom) => {\r\n        socket.emit(\"socketOnRequest\", (minRoom))\r\n        history.push(\"/gamesetup\");\r\n    })\r\n\r\n    return (\r\n        <div>\r\n        { props.name !== props.ownName && \r\n            <div className={(props.room === 0) ? \"PoolElem\" : \"Disabled\"}>\r\n                <div className=\"PoolElemInfo\">\r\n                    <div><b>{props.name}</b> ({props.room})</div>\r\n                    { (props.room === 0) ?\r\n                        <div>Ready To Play!</div>\r\n                        :\r\n                        <div>(Currently playing...)</div>\r\n                    }           \r\n                </div>\r\n                <div className=\"PoolElemButton\">\r\n                    { (props.room === 0) ?\r\n                        <Button onClick={startGame}>PLAY!</Button>\r\n                        :\r\n                        <Button disabled>xxxxx</Button>\r\n                    } \r\n                    \r\n                </div>\r\n            </div>\r\n        }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PoolElem\r\n","import React, { useState, useContext, useEffect } from \"react\"\r\nimport { UserContext } from \"../App\"\r\nimport { socket } from \"./Socket\";\r\n\r\nimport PoolElem from './PoolElem'\r\n\r\nconst Pool = () => {\r\n    const { userData, setUserData } = useContext(UserContext)\r\n    const [userRooms, setUserRooms] = useState({})\r\n    const [userSearch, setUserSearch] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        socket.emit(\"setPlayerName\", userData.user.name)\r\n    }, [])\r\n    // if(Object.keys(userRooms).length === 0){\r\n        \r\n    // }\r\n\r\n    socket.on(\"userList\", (userList) => {\r\n        setUserRooms(userList)\r\n     });\r\n\r\n    return (\r\n        <div className=\"PoolComponent\">\r\n            <center>There are now {Object.keys(userRooms).length-1} other players here</center>\r\n            <input type=\"text\" placeholder=\"Search Bar...\"\r\n                className=\"SearchBar\"\r\n                onChange={(e) => {\r\n                    setUserSearch(e.target.value);\r\n                }}\r\n            />\r\n            <br/>\r\n            <div className=\"UserListWrapper\">\r\n                {\r\n                    Object.keys(userRooms)\r\n                        .filter((username) => {\r\n                        if (username.toLowerCase().includes(userSearch.toLowerCase())) {\r\n                            return username;\r\n                        }\r\n                        })\r\n                        .map((username) => {\r\n                            return <PoolElem key={username} \r\n                            name={username} room={userRooms[username]}\r\n                            ownName={userData.user.name} />\r\n                    })\r\n                }\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Pool\r\n","import React from 'react'\r\n\r\nimport github from '../img/github.png'\r\nimport youtube from '../img/youtube.png'\r\nimport \"./Lobby.css\"\r\n\r\nconst Footer = () => {\r\n    return (\r\n        <div className=\"Footer\">\r\n            <h6>FP Progjar &nbsp;&nbsp;&nbsp;&nbsp;\r\n                {/* <a href={\"https://github.com/danielszabo88/CapsuleSoccerApp\"} target=\"_blank\"><img src={github} style={{width:\"28px\", height:\"28px\"}}/></a> */}\r\n            </h6>\r\n            {/* <h6>Physics Engine Tutorial &nbsp;&nbsp;-&nbsp;&nbsp;\r\n                <a href={\"https://www.youtube.com/playlist?list=PLo6lBZn6hgca1T7cNZXpiq4q395ljbEI_\"} target=\"_blank\"><img src={youtube} style={{width:\"28px\", height:\"28px\"}}/></a>\r\n            </h6> */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Footer\r\n","import React, { useState, useEffect, useContext } from \"react\"\r\nimport { UserContext } from \"../App\"\r\nimport { Button } from \"react-bootstrap\"\r\nimport { Container, Col, Row } from \"react-bootstrap\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { socket } from \"./Socket\";\r\n\r\nimport \"./Lobby.css\"\r\nimport Chat from './Chat'\r\nimport Pool from './Pool'\r\nimport Footer from './Footer'\r\n\r\nconst Lobby = () => {\r\n    const { userData, setUserData } = useContext(UserContext)\r\n    const history = useHistory()\r\n\r\n    const userStats = () => {\r\n        history.push(\"/stats\");\r\n    }\r\n    const logOut = () => {\r\n        setUserData({\r\n          token: undefined,\r\n          user: undefined,\r\n        });\r\n        socket.emit(\"logoutUser\", userData.user.name)\r\n        localStorage.setItem(\"auth-token\", \"\");\r\n      }\r\n\r\n    return (\r\n        <Container className=\"MainScreen\">\r\n            <Row>\r\n                <Col>\r\n                    <div className=\"Header\">\r\n                        <div className=\"BigRedBall\"></div>\r\n                        <div className=\"HeaderCenter\">\r\n                            <p>\r\n                                <b>Tarkam of Madness</b>\r\n                            </p>\r\n                            <p>\r\n                                <i>Get 3 points to win!</i>\r\n                            </p>\r\n                            <p>Ready For The Next Game, <b>{userData.user.name}</b>?</p>\r\n                            <div className=\"HeaderLinks\">\r\n                                <div className=\"StatLinkDiv\">\r\n                                    <p>Check Your Stats Here</p>\r\n                                    <Button className=\"StatButton\" onClick={userStats}>Your Stats</Button>\r\n                                </div>\r\n                                <div className=\"LogOutDiv\">\r\n                                    <p>Log Out If You Want</p>\r\n                                    <Button className=\"LogOutButton\" onClick={logOut}>Log Out</Button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"BigRedBall\"></div>\r\n                    </div>                     \r\n                </Col>                \r\n            </Row>\r\n            <Row style={{height: \"70%\"}}>\r\n                <Col className=\"ChatBlock\">\r\n                    <div className=\"ChatHeader\">\r\n                        <p><b>Let's Chat Here</b></p>\r\n                        <p>Say Hello! Don't be shy, <b>{userData.user.name}!</b></p>\r\n                    </div>\r\n                    <Chat />\r\n                </Col>\r\n                <Col className=\"PoolBlock\">\r\n                    <div className=\"PoolHeader\">\r\n                        <p><b>Currently Connected Users</b></p>\r\n                    </div>\r\n                    <Pool />\r\n                </Col>\r\n            </Row>\r\n            <Row>\r\n                <Col>\r\n                    <Footer />\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Lobby\r\n","import React, { useContext } from \"react\"\r\nimport { UserContext } from \"../App\"\r\nimport Auth from \"./auth/Auth\"\r\nimport Lobby from \"./Lobby\"\r\n\r\nconst Welcome = () => {\r\n    const { userData, setUserData } = useContext(UserContext);\r\n\r\n    return (\r\n        <div>\r\n            {userData.user ? (\r\n                <Lobby /> \r\n            ):(\r\n                <Auth />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Welcome\r\n","import React, { useState, useEffect } from 'react'\r\nimport { Button } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { socket } from \"../Socket\";\r\n\r\nimport \"./GameStyle.css\"\r\n\r\nconst GameSetup = () => {\r\n    const [gameInfo, setGameInfo] = useState({p1name: \"\", p2name: \"\", room: 0})\r\n\r\n    const history = useHistory()\r\n    useEffect (() => {\r\n        console.log(\"GAMESETTING EMIT: \",socket.id)\r\n        socket.emit(\"RequestGameInfo\")\r\n    }, [])\r\n\r\n    socket.on(\"ProvideGameInfo\", data => {\r\n        setGameInfo({p1name: data.p1name, p2name: data.p2name, room: data.room})\r\n    })\r\n\r\n    socket.on(\"gameConfirm\", confirmed => {\r\n        if(!confirmed){\r\n            console.log(\"delete room\")\r\n            socket.emit(\"cleanUpRoom\")\r\n            history.push(\"/\");\r\n        }\r\n    })\r\n\r\n    socket.on(\"redirectToLobby\", () => {\r\n        history.push(\"/\");\r\n    })\r\n\r\n    const goBack = () => {\r\n        socket.emit(\"gameConfirm\", false)\r\n        history.push(\"/\");\r\n    }\r\n\r\n    const goPlay = () => {\r\n        socket.emit(\"gameConfirm\", true)\r\n        console.log(\"play\")\r\n        history.push(\"/game\");\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"GameSetupContent\">\r\n                <span style={{fontSize: \"10px\"}}>{gameInfo.room}</span>\r\n                <h1>IT'S A MATCH!</h1>\r\n                <br/>\r\n                {(gameInfo.p1name) ? <h2>{gameInfo.p1name}</h2> : <h2>. . .</h2>}\r\n                <h3>vs.</h3>\r\n                {(gameInfo.p2name) ? <h2>{gameInfo.p2name}</h2> : <h2>. . .</h2>}\r\n                <br/>\r\n                <h1>Both of you want to play?</h1>\r\n                <div className=\"ButtonSection\">\r\n                    <Button className=\"LobbyButton\" onClick={goBack}>No Sorry...</Button>\r\n                    <Button className=\"PlayButton\" onClick={goPlay}>LET'S PLAY!</Button>\r\n                </div>\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GameSetup\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { UserContext } from \"../../App\"\r\nimport { Button } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios'\r\nimport { socket } from \"../Socket\";\r\n\r\nimport \"./GameStyle.css\"\r\n\r\nconst GameOver = () => {\r\n    const { userData, setUserData } = useContext(UserContext)\r\n    const history = useHistory()\r\n    const [resultSent, setResultSent] = useState(false)\r\n    const [finalResult, setFinalResult] = useState({\r\n        p1name: \"\", \r\n        p2name: \"\", \r\n        p1score: 0,\r\n        p2score: 0\r\n    })\r\n    useEffect (() => {\r\n        socket.emit(\"RequestFinalResult\", socket.id)\r\n    }, [])\r\n    useEffect (() => {\r\n        let updateStat = {}\r\n        if(userData.user.name === finalResult.p1name){\r\n            updateStat = {\r\n                name: finalResult.p1name,\r\n                point: finalResult.p1point,\r\n                oppName: finalResult.p2name,\r\n                oppPoint: finalResult.p2point\r\n            }\r\n            if(!resultSent){\r\n                setResultSent(true)\r\n                console.log(\"DB UPDATE FOR STATS: \", updateStat)\r\n                axios.put(\"/api/users/profile\", updateStat, {\r\n                    headers: {\r\n                        \"auth-token\": userData.token,\r\n                    },\r\n                })\r\n            }\r\n        }\r\n        if(userData.user.name === finalResult.p2name){\r\n            updateStat = {\r\n                name: finalResult.p2name,\r\n                point: finalResult.p2point,\r\n                oppName: finalResult.p1name,\r\n                oppPoint: finalResult.p1point\r\n            }\r\n            if(!resultSent){\r\n                setResultSent(true)\r\n                console.log(\"DB UPDATE FOR STATS: \", updateStat)\r\n                axios.put(\"/api/users/profile\", updateStat, {\r\n                    headers: {\r\n                        \"auth-token\": userData.token,\r\n                    },\r\n                })\r\n            }\r\n        }\r\n    }, [finalResult])\r\n\r\n    socket.on(\"ProvideFinalResult\", data => {\r\n        setFinalResult({\r\n            p1name: data.p1name, \r\n            p2name: data.p2name, \r\n            p1point: data.p1point,\r\n            p2point: data.p2point})\r\n    })\r\n\r\n    socket.on(\"gameConfirm\", confirmed => {\r\n        if(!confirmed){\r\n            socket.emit(\"cleanUpRoom\")\r\n            history.push(\"/\");\r\n        }\r\n    })\r\n\r\n    //if someone came to the URL directly\r\n    socket.on(\"redirectToLobby\", () => {\r\n        history.push(\"/\");\r\n    })\r\n\r\n    const goBack = () => {\r\n        socket.emit(\"gameConfirm\", false)\r\n        history.push(\"/\");\r\n    }\r\n\r\n    const goPlay = () => {\r\n        socket.emit(\"gameConfirm\", true)\r\n        history.push(\"/game\");\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"GameOverContent\">\r\n                <h1>WHAT A GAME!</h1>\r\n                <br/>\r\n                <h2>{finalResult.p1name}: {finalResult.p1point}</h2>\r\n                <h3>vs.</h3>\r\n                <h2>{finalResult.p2name}: {finalResult.p2point}</h2>\r\n                <br/>\r\n                <h1>CONGRATS TO&nbsp;&nbsp;\r\n                    {(finalResult.p1point > finalResult.p2point) ?\r\n                    <span className=\"WinnerName\">{finalResult.p1name}</span> :\r\n                    <span className=\"WinnerName\">{finalResult.p2name}</span>} !!</h1>\r\n                <div className=\"ButtonSection\">\r\n                    <Button className=\"PlayButton\" onClick={goPlay}>PLAY AGAIN!</Button>\r\n                    <Button className=\"LobbyButton\" onClick={goBack}>To The Lobby</Button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default GameOver\r\n","import React, { useState, useEffect, useContext } from 'react'\r\nimport { UserContext } from \"../App\"\r\nimport { Button } from \"react-bootstrap\"\r\nimport { useHistory } from \"react-router-dom\";\r\nimport axios from 'axios'\r\nimport { socket } from \"./Socket\";\r\n\r\nimport \"./Lobby.css\"\r\n\r\nconst Stats = () => {\r\n    const history = useHistory()\r\n    const [userStats, setUserStats] = useState({\r\n        gamesPlayed: 0, gamesWon: 0, \r\n        pointsFor: 0, pointsAgainst: 0,\r\n        lastGame: true, lastOpponent: \"\"\r\n    });\r\n    const { userData, setUserData } = useContext(UserContext)\r\n\r\n    useEffect(() => {\r\n        axios.get(\"/api/users/profile\", {\r\n            headers: {\r\n              \"auth-token\": userData.token,\r\n            },\r\n          }).then((response) => {\r\n            setUserStats(response.data.stats)\r\n        });\r\n    }, [])\r\n\r\n    const goBack = () => {\r\n        history.push(\"/\");\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"StatContent\">\r\n                <h1>STATS of {userData.user.name}</h1>\r\n                {( userStats.gamesPlayed > 0 ) ? \r\n                    <div className=\"StatText\">\r\n                        <h4>You have finished <span style={{color:\"red\"}}>{userStats.gamesPlayed}</span> Games so far.</h4>\r\n                        <h4>And won <span style={{color:\"red\"}}>{userStats.gamesWon}</span> of them.</h4>\r\n                        <h2>Nice.</h2>\r\n                        <h4>You've received <span style={{color:\"red\"}}>{userStats.pointsFor}</span> Points altogether.</h4>\r\n                        <h4>Your opponents have received <span style={{color:\"red\"}}>{userStats.pointsAgainst}</span>.</h4>\r\n                        <h4>Last time you played with <span style={{color:\"red\"}}>{userStats.lastOpponent}</span></h4>\r\n                        {(userStats.lastGame) ? \r\n                            (<h2><span style={{color:\"red\"}}>And You Won!</span></h2>)\r\n                            : \r\n                            (<h2><span style={{color:\"red\"}}>And You Lost :(</span></h2>)\r\n                        }\r\n                        <h4>Sooo it's probably time to try again!</h4>\r\n                    </div> \r\n                    :\r\n                    <div>\r\n                        <h2>No Game, No Stats...</h2>\r\n                        <br/><br/>\r\n                        <h2>\\_()_/</h2>\r\n                        <br/><br/>\r\n                        <h6>(it's either still loading your data or you've never ever played a game)</h6>\r\n                    </div>\r\n                }\r\n                \r\n                <div className=\"StatBackDiv\">\r\n                    <Button className=\"StatBackButton\" onClick={goBack}>ok thanks that was quite interesting</Button>\r\n                </div>\r\n           </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Stats\r\n","import { createContext, useState, useEffect } from 'react'\r\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\r\nimport { Container } from 'react-bootstrap'\r\nimport axios from 'axios'\r\n\r\nimport Welcome from './components/Welcome'\r\nimport Game from './components/game/Game'\r\nimport GameSetup from './components/game/GameSetup'\r\nimport GameOver from './components/game/GameOver'\r\nimport Stats from './components/Stats'\r\n\r\nexport const UserContext = createContext()\r\n\r\nfunction App() {\r\n  const [userData, setUserData] = useState({\r\n    token: undefined,\r\n    user: undefined,\r\n  })\r\n\r\n  useEffect(() => {\r\n    const isLoggedIn = async () => {\r\n      let token = localStorage.getItem(\"auth-token\")\r\n      if (token == null){\r\n        localStorage.setItem(\"auth-token\", \"\")\r\n        token = \"\"\r\n      }\r\n\r\n      const tokenResponse = await axios.post(\r\n        '/api/users/tokenIsValid', \r\n        null, \r\n        {headers: {\"auth-token\": token}}\r\n      )\r\n\r\n      console.log(tokenResponse.data)\r\n      if(tokenResponse.data){\r\n        const userResponse = await axios.get('/api/users/profile',\r\n          {headers: {'auth-token': token}}\r\n        )\r\n        setUserData({\r\n          token: token,\r\n          user: userResponse.data\r\n        })\r\n      }\r\n    }\r\n    isLoggedIn()\r\n  }, [])\r\n\r\n  return (\r\n    <UserContext.Provider value={{ userData, setUserData }}>\r\n      <Router>\r\n        <Container>        \r\n            <Route path='/' exact component={Welcome} />\r\n            <Route path='/game' component={Game} />\r\n            <Route path='/gamesetup' component={GameSetup} />\r\n            <Route path='/gameover' component={GameOver} />\r\n            <Route path='/stats' component={Stats} />\r\n        </Container>\r\n      </Router>\r\n    </UserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './bootstrap.min.css';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}